---
ID: "8e84dd35-787a-46f5-b2fe-f36f2d1f9365"
Parent: "dfcbfa5a-2e37-418a-adb7-f411ecae89a9"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Base Themes/SearchTheme/Scripts/component-search-facet-daterange"
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/8E84DD35787A46F5B2FEF36F2D1F9365.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "8e84dd35-787a-46f5-b2fe-f36f2d1f9365"
  Value: LyoqDQogKiBJbmNsdWRlcyBmdW5jdGlvbmFsaXR5IGZvciBkYXRlcmFuZ2UgY29tcG9uZW50DQogKiBAbW9kdWxlIGZhY2V0RGF0ZVJhbmdlDQogKiBAcGFyYW0gIHtqUXVlcnl9ICQgSW5zdGFuY2Ugb2YgalF1ZXJ5DQogKiBAcGFyYW0gIHtEb2N1bWVudH0gZG9jdW1lbnQgZG9tIGRvY3VtZW50IG9iamVjdA0KICogQHJldHVybiB7T2JqZWN0fSBsaXN0IG9mIG1ldGhvZHMgZm9yIHdvcmtpbmcgd2l0aCBkYXRlIHJhbmdlIGNvbXBvbmVudA0KKi8NClhBLmNvbXBvbmVudC5zZWFyY2guZmFjZXQuZGF0ZXJhbmdlID0gKGZ1bmN0aW9uICgkLCBkb2N1bWVudCkgew0KICAgIC8qKg0KICAgICogVGhpcyBvYmplY3Qgc3RvcmVzIGFsbCBwdWJsaWMgYXBpIG1ldGhvZHMNCiAgICAqIEB0eXBlIHtPYmplY3QuPE1ldGhvZHM+fQ0KICAgICogQG1lbWJlck9mIG1vZHVsZTpmYWNldERhdGVSYW5nZQ0KICAgICogKi8NCiAgICB2YXIgYXBpID0ge30sIHF1ZXJ5TW9kZWwsIHVybEhlbHBlck1vZGVsLCB0b1VybERhdGUsIGZyb21VcmxEYXRlOw0KICAgIC8qKg0KICAgICAqIGZvcm1hdCBkYXRlDQogICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGUgZGF0ZSB0aGF0IHNob3VsZCBiZSBmb3JtYXR0ZWQNCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZmFjZXREYXRlUmFuZ2UNCiAgICAgKiBAYWxpYXMgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLnRvVXJsRGF0ZQ0KICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IGRhdGUgaW4gZm9ybWF0ICd5eW1tZGQnDQogICAgICovDQogICAgdG9VcmxEYXRlID0gZnVuY3Rpb24gKGRhdGUpIHsNCiAgICAgICAgcmV0dXJuIGRhdGUgIT09IG51bGwgJiYgZGF0ZSAhPT0gIiIgPyAkLmRhdGVwaWNrZXIuZm9ybWF0RGF0ZSgneXltbWRkJywgZGF0ZSkgOiAiIjsNCiAgICB9Ow0KICAgIC8qKg0KICAgICAqIGZvcm1hdCBkYXRlIGZyb20gdXJsDQogICAgICogQHByaXZhdGUNCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVN0cmluZyBkYXRlIHRoYXQgc2hvdWxkIGJlIGZvcm1hdHRlZA0KICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZmFjZXREYXRlUmFuZ2UNCiAgICAgKiBAYWxpYXMgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLmZyb21VcmxEYXRlDQogICAgICogQHJldHVybnMge0RhdGV9IGRhdGUNCiAgICAgKi8NCiAgICBmcm9tVXJsRGF0ZSA9IGZ1bmN0aW9uIChkYXRlU3RyaW5nKSB7DQogICAgICAgIHZhciB5ID0gZGF0ZVN0cmluZy5zdWJzdHIoMCwgNCksDQogICAgICAgICAgICBtID0gZGF0ZVN0cmluZy5zdWJzdHIoNCwgMikgLSAxLA0KICAgICAgICAgICAgZCA9IGRhdGVTdHJpbmcuc3Vic3RyKDYsIDIpLA0KICAgICAgICAgICAgRCA9IG5ldyBEYXRlKHksIG0sIGQpOw0KDQogICAgICAgIGlmIChkYXRlU3RyaW5nID09PSAiIikgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEQuZ2V0RnVsbFllYXIoKSA9PSB5ICYmIEQuZ2V0TW9udGgoKSA9PSBtICYmIEQuZ2V0RGF0ZSgpID09IGQpDQogICAgICAgICAgICByZXR1cm4gRDsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgZGF0ZTogIiArIGRhdGVTdHJpbmc7DQogICAgfTsNCiAgICAvKioNCiAgICAqIEBuYW1lIG1vZHVsZTpmYWNldERhdGVSYW5nZS5GYWNldERhdGVSYW5nZU1vZGVsDQogICAgKiBAY29uc3RydWN0b3INCiAgICAqIEBhdWdtZW50cyBCYWNrYm9uZS5Nb2RlbA0KICAgICovDQogICAgdmFyIEZhY2V0RGF0ZVJhbmdlTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoDQogICAgICAgIC8qKiBAbGVuZHMgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLkZhY2V0RGF0ZVJhbmdlTW9kZWwucHJvdG90eXBlICoqLw0KICAgICAgICB7DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgKiBEZWZhdWx0IG1vZGVsIG9wdGlvbnMNCiAgICAgICAgICAgKiBAZGVmYXVsdA0KICAgICAgICAgICAqLw0KICAgICAgICAgICAgZGVmYXVsdHM6IHsNCiAgICAgICAgICAgICAgICBkYXRhUHJvcGVydGllczoge30sDQogICAgICAgICAgICAgICAgc2lnOiBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAvKioNCiAgICAgICogQG5hbWUgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLkZhY2V0RGF0ZVJhbmdlVmlldw0KICAgICAgKiBAY29uc3RydWN0b3INCiAgICAgICogQGF1Z21lbnRzIEJhY2tib25lLlZpZXcNCiAgICAgICovDQogICAgdmFyIEZhY2V0RGF0ZVJhbmdlVmlldyA9IFhBLmNvbXBvbmVudC5zZWFyY2guYmFzZVZpZXcuZXh0ZW5kKA0KICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTpmYWNldERhdGVSYW5nZS5GYWNldERhdGVSYW5nZVZpZXcucHJvdG90eXBlICoqLw0KICAgICAgICB7DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICogSW5pdGlhbGx5IHNldHMgZGF0YSB0byBtb2RlbCBhbmQgd2F0Y2hlcyBldmVudHMgb24gd2hpY2gNCiAgICAgICAgICAgICogdmlldyBzaG91bGQgYmUgdXBkYXRlZA0KICAgICAgICAgICAgKiBAbGlzdGVucyBtb2R1bGU6ZmFjZXREYXRlUmFuZ2UuRmFjZXREYXRlUmFuZ2VWaWV3fmV2ZW50OmNoYW5nZQ0KICAgICAgICAgICAgKiBAbGlzdGVucyBtb2R1bGU6WEEuY29tcG9uZW50LnNlYXJjaC52ZW50fmV2ZW50Omhhc2hDaGFuZ2VkDQogICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZmFjZXREYXRlUmFuZ2UuRmFjZXREYXRlUmFuZ2VWaWV3DQogICAgICAgICAgICAqLw0KICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllcyA9IHRoaXMuJGVsLmRhdGEoKS5wcm9wZXJ0aWVzOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuc2V0KHsgZGF0YVByb3BlcnRpZXM6IHRoaXMucHJvcGVydGllcyB9KTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zZXQoInNpZyIsIHRoaXMudHJhbnNsYXRlU2lnbmF0dXJlcyh0aGlzLnByb3BlcnRpZXMuc2VhcmNoUmVzdWx0c1NpZ25hdHVyZSwgdGhpcy5wcm9wZXJ0aWVzLmYpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5vbigiY2hhbmdlIiwgdGhpcy5yZW5kZXIsIHRoaXMpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIFhBLmNvbXBvbmVudC5zZWFyY2gudmVudC5vbigiaGFzaENoYW5nZWQiLCB0aGlzLnVwZGF0ZUNvbXBvbmVudC5iaW5kKHRoaXMpKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIGxpc3Qgb2YgZXZlbnRzIGZvciBCYWNrYm9uZSBWaWV3DQogICAgICAgICAgICAgKiBAbWVtYmVyb2YgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLkZhY2V0RGF0ZVJhbmdlVmlldw0KICAgICAgICAgICAgICogQGFsaWFzIG1vZHVsZTpmYWNldERhdGVSYW5nZS5GYWNldERhdGVSYW5nZVZpZXcjZXZlbnRzDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGV2ZW50czogew0KICAgICAgICAgICAgICAgICdjaGFuZ2UgLnN0YXJ0RGF0ZSc6ICd1cGRhdGVGYWNldCcsDQogICAgICAgICAgICAgICAgJ2NoYW5nZSAuZW5kRGF0ZSc6ICd1cGRhdGVGYWNldCcsDQogICAgICAgICAgICAgICAgJ2NsaWNrIC5ib3R0b20tcmVtb3ZlLWZpbHRlciwgLmNsZWFyLWZpbHRlcic6ICdjbGVhckZpbHRlcicNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIFJlbmRlcnMgdmlldy4gVXNlIGpxdWVyeSB1aSBkYXRlcGlja2VyDQogICAgICAgICAgICAgKiBAbWVtYmVyb2YgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLkZhY2V0RGF0ZVJhbmdlVmlldw0KICAgICAgICAgICAgICogQGFsaWFzIG1vZHVsZTpmYWNldERhdGVSYW5nZS5GYWNldERhdGVSYW5nZVZpZXcjcmVuZGVyDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHZhciBmcm9tRGF0ZURlZmF1bHRPZmZzZXQgPSBwYXJzZUludCh0aGlzLm1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKS5mcm9tRGF0ZURlZmF1bHRPZmZzZXQpLA0KICAgICAgICAgICAgICAgICAgICB0b0RhdGVEZWZhdWx0T2Zmc2V0ID0gcGFyc2VJbnQodGhpcy5tb2RlbC5nZXQoJ2RhdGFQcm9wZXJ0aWVzJykudG9EYXRlRGVmYXVsdE9mZnNldCksDQogICAgICAgICAgICAgICAgICAgIGZyb21EYXRlRm9ybWF0ID0gdGhpcy5tb2RlbC5nZXQoJ2RhdGFQcm9wZXJ0aWVzJykuZnJvbURhdGVEaXNwbGF5Rm9ybWF0LA0KICAgICAgICAgICAgICAgICAgICB0b0RhdGVGb3JtYXQgPSB0aGlzLm1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKS50b0RhdGVEaXNwbGF5Rm9ybWF0LA0KICAgICAgICAgICAgICAgICAgICBmcm9tRGF0ZU1vbnRoc1Nob3duID0gdGhpcy5tb2RlbC5nZXQoJ2RhdGFQcm9wZXJ0aWVzJykuZnJvbURhdGVNb250aHNTaG93biwNCiAgICAgICAgICAgICAgICAgICAgdG9EYXRlTW9udGhzU2hvd24gPSB0aGlzLm1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKS50b0RhdGVNb250aHNTaG93biwNCiAgICAgICAgICAgICAgICAgICAgZnJvbURhdGVQYXN0RGF5cyA9IHRoaXMubW9kZWwuZ2V0KCdkYXRhUHJvcGVydGllcycpLmZyb21EYXRlUGFzdERheXMsDQogICAgICAgICAgICAgICAgICAgIHRvRGF0ZUZ1dHVyZURheXMgPSB0aGlzLm1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKS50b0RhdGVGdXR1cmVEYXlzLA0KICAgICAgICAgICAgICAgICAgICBmcm9tRGF0ZVZpc2libGUgPSB0aGlzLm1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKS5mcm9tRGF0ZVZpc2libGUsDQogICAgICAgICAgICAgICAgICAgIHRvRGF0ZVZpc2libGUgPSB0aGlzLm1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKS50b0RhdGVWaXNpYmxlLA0KICAgICAgICAgICAgICAgICAgICAkZnJvbURhdGUgPSB0aGlzLiRlbC5maW5kKCcuc3RhcnREYXRlJyksDQogICAgICAgICAgICAgICAgICAgICR0b0RhdGUgPSB0aGlzLiRlbC5maW5kKCcuZW5kRGF0ZScpLA0KICAgICAgICAgICAgICAgICAgICBoYXNoT2JqID0gcXVlcnlNb2RlbC5wYXJzZUhhc2hQYXJhbWV0ZXJzKHdpbmRvdy5sb2NhdGlvbi5oYXNoKSwNCiAgICAgICAgICAgICAgICAgICAgc2lnID0gdGhpcy5tb2RlbC5nZXQoJ3NpZycpLA0KICAgICAgICAgICAgICAgICAgICBsYW5nID0gJCgiaHRtbCIpLmF0dHIoImxhbmciKSA/ICQoImh0bWwiKS5hdHRyKCJsYW5nIikgOiAiIiwNCiAgICAgICAgICAgICAgICAgICAgaW5PdmVybGF5ID0gdGhpcy4kZWwuY2xvc2VzdCgnLm92ZXJsYXktaW5uZXInKS5sZW5ndGgsDQogICAgICAgICAgICAgICAgICAgIGRhdGVzLCBpOw0KDQogICAgICAgICAgICAgICAgaWYgKHRvRGF0ZUZvcm1hdCkgew0KICAgICAgICAgICAgICAgICAgICB0b0RhdGVGb3JtYXQgPSB0b0RhdGVGb3JtYXQucmVwbGFjZSgveXkvZywgInkiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGZyb21EYXRlRm9ybWF0KSB7DQogICAgICAgICAgICAgICAgICAgIGZyb21EYXRlRm9ybWF0ID0gZnJvbURhdGVGb3JtYXQucmVwbGFjZSgveXkvZywgInkiKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoZnJvbURhdGVWaXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICRmcm9tRGF0ZS5kYXRlcGlja2VyKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQ6IGZyb21EYXRlRm9ybWF0LA0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTW9udGg6IGZyb21EYXRlTW9udGhzU2hvd24sDQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VZZWFyOiBmcm9tRGF0ZU1vbnRoc1Nob3duLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWluRGF0ZTogZnJvbURhdGVQYXN0RGF5cyA/IChmcm9tRGF0ZURlZmF1bHRPZmZzZXQgIT0gJycgPyAtMSAqIGZyb21EYXRlRGVmYXVsdE9mZnNldCA6IG5ldyBEYXRlKDE5MDAsIDEsIDEpKSA6IG5ldyBEYXRlKCksDQogICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVTaG93OiBpbk92ZXJsYXkgPyB0aGlzLm92ZXJyaWRlWkluZGV4IDogdW5kZWZpbmVkDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICh0b0RhdGVWaXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICR0b0RhdGUuZGF0ZXBpY2tlcih7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0OiB0b0RhdGVGb3JtYXQsDQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VNb250aDogdG9EYXRlTW9udGhzU2hvd24sDQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VZZWFyOiB0b0RhdGVNb250aHNTaG93biwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1heERhdGU6IHRvRGF0ZUZ1dHVyZURheXMgPyAodG9EYXRlRGVmYXVsdE9mZnNldCAhPSAnJyA/IHRvRGF0ZURlZmF1bHRPZmZzZXQgOiBuZXcgRGF0ZSgyMTAwLCAxLCAxKSkgOiBuZXcgRGF0ZSgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlU2hvdzogaW5PdmVybGF5ID8gdGhpcy5vdmVycmlkZVpJbmRleCA6IHVuZGVmaW5lZA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJHhhLmRhdGVwaWNrZXIuc2V0RGVmYXVsdHMoJHhhLmRhdGVwaWNrZXIucmVnaW9uYWxbbGFuZ10pOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzaWcubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc2hPYmouaGFzT3duUHJvcGVydHkoc2lnW2ldKSAmJiBoYXNoT2JqW3NpZ1tpXV0gIT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVzID0gaGFzaE9ialtzaWdbaV1dLnNwbGl0KCJ8Iik7DQogICAgICAgICAgICAgICAgICAgICAgICAkZnJvbURhdGUuZGF0ZXBpY2tlcigic2V0RGF0ZSIsIGZyb21VcmxEYXRlKGRhdGVzWzBdKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAkdG9EYXRlLmRhdGVwaWNrZXIoInNldERhdGUiLCBmcm9tVXJsRGF0ZShkYXRlc1sxXSkpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgKiBVcGRhdGVzIGhhc2ggYnkgY2FsbGluZyBbInVwZGF0ZUhhc2giXXtAbGluayBtb2R1bGU6c2VhcmNoUXVlcnkudXBkYXRlSGFzaH0NCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpmYWNldERhdGVSYW5nZS5GYWNldERhdGVSYW5nZVZpZXcNCiAgICAgICAgICAgICogQGFsaWFzIG1vZHVsZTpmYWNldERhdGVSYW5nZS5GYWNldERhdGVSYW5nZVZpZXcjdXBkYXRlRmFjZXQNCiAgICAgICAgICAgICovDQogICAgICAgICAgICB1cGRhdGVGYWNldDogZnVuY3Rpb24gKHBhcmFtKSB7DQogICAgICAgICAgICAgICAgdmFyICRmYWNldENsb3NlID0gdGhpcy4kZWwuZmluZCgnLmZhY2V0LWhlYWRpbmcgPiBzcGFuJyksDQogICAgICAgICAgICAgICAgICAgICRmcm9tRGF0ZSA9IHRoaXMuJGVsLmZpbmQoJy5zdGFydERhdGUnKSwNCiAgICAgICAgICAgICAgICAgICAgJHRvRGF0ZSA9IHRoaXMuJGVsLmZpbmQoJy5lbmREYXRlJyksDQogICAgICAgICAgICAgICAgICAgIGZyb21EYXRlID0gJGZyb21EYXRlLmxlbmd0aCA+IDAgPyAkZnJvbURhdGUuZGF0ZXBpY2tlcigiZ2V0RGF0ZSIpIDogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgdG9EYXRlID0gJHRvRGF0ZS5sZW5ndGggPiAwID8gJHRvRGF0ZS5kYXRlcGlja2VyKCJnZXREYXRlIikgOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICBzaWcgPSB0aGlzLm1vZGVsLmdldCgnc2lnJyk7DQoNCiAgICAgICAgICAgICAgICBxdWVyeU1vZGVsLnVwZGF0ZUhhc2godGhpcy51cGRhdGVTaWduYXR1cmVzSGFzaChzaWcsIHRvVXJsRGF0ZShmcm9tRGF0ZSkgKyAifCIgKyB0b1VybERhdGUodG9EYXRlKSwge30pKTsNCiAgICAgICAgICAgICAgICAkZmFjZXRDbG9zZS5hZGRDbGFzcygnaGFzLWFjdGl2ZS1mYWNldCcpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgKiBDbGVhcnMgc2VsZWN0ZWQgZmlsdGVyIGluIGNvbXBvbmVudA0KICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW0NCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpmYWNldERhdGVSYW5nZS5GYWNldERhdGVSYW5nZVZpZXcNCiAgICAgICAgICAgICogQGFsaWFzIG1vZHVsZTpmYWNldERhdGVSYW5nZS5GYWNldERhdGVSYW5nZVZpZXcjY2xlYXJGaWx0ZXINCiAgICAgICAgICAgICovDQogICAgICAgICAgICBjbGVhckZpbHRlcjogZnVuY3Rpb24gKHBhcmFtKSB7DQogICAgICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSB0aGlzLm1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKSwNCiAgICAgICAgICAgICAgICAgICAgJGZhY2V0Q2xvc2UgPSB0aGlzLiRlbC5maW5kKCcuZmFjZXQtaGVhZGluZyA+IHNwYW4nKSwNCiAgICAgICAgICAgICAgICAgICAgaGFzaCA9IHF1ZXJ5TW9kZWwucGFyc2VIYXNoUGFyYW1ldGVycyh3aW5kb3cubG9jYXRpb24uaGFzaCksDQogICAgICAgICAgICAgICAgICAgIHNpZyA9IHRoaXMubW9kZWwuZ2V0KCdzaWcnKSwNCiAgICAgICAgICAgICAgICAgICAgc2hvdWxkQ2xlYXIgPSBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgZmFjZXREYXRhLA0KICAgICAgICAgICAgICAgICAgICBpOw0KDQogICAgICAgICAgICAgICAgJGZhY2V0Q2xvc2UucmVtb3ZlQ2xhc3MoJ2hhcy1hY3RpdmUtZmFjZXQnKTsNCg0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzaWcubGVuZ3RoOyBpKyspIHsgIA0KICAgICAgICAgICAgICAgICAgICBmYWNldERhdGEgPSBzaWdbaV07DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaGFzaFtmYWNldERhdGFdICE9PSAidW5kZWZpbmVkIiAmJiBoYXNoW2ZhY2V0RGF0YV0gIT09ICIiKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW2ZhY2V0RGF0YV07DQogICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRDbGVhciA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoIXNob3VsZENsZWFyKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBxdWVyeU1vZGVsLnVwZGF0ZUhhc2godGhpcy51cGRhdGVTaWduYXR1cmVzSGFzaChzaWcsICIiLCBoYXNoKSk7DQoNCiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNldCh7IGRhdGFQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzIH0pOw0KDQogICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLnN0YXJ0RGF0ZScpLnZhbCgiIik7DQogICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLmVuZERhdGUnKS52YWwoIiIpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgKiBVcGRhdGVzIGNvbXBvbmVudCBhZnRlciBjaGFuZ2VzIGluIGhhc2gNCiAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhhc2ggb2JqZWN0IHRoYXQgc3RvcmVzIGhhc2ggdmFsdWVzDQogICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZmFjZXREYXRlUmFuZ2UuRmFjZXREYXRlUmFuZ2VWaWV3DQogICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6ZmFjZXREYXRlUmFuZ2UuRmFjZXREYXRlUmFuZ2VWaWV3I3VwZGF0ZUNvbXBvbmVudA0KICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudDogZnVuY3Rpb24gKGhhc2gpIHsNCiAgICAgICAgICAgICAgICB2YXIgJGZyb21EYXRlID0gdGhpcy4kZWwuZmluZCgnLnN0YXJ0RGF0ZScpLA0KICAgICAgICAgICAgICAgICAgICAkdG9EYXRlID0gdGhpcy4kZWwuZmluZCgnLmVuZERhdGUnKSwNCiAgICAgICAgICAgICAgICAgICAgc2lnID0gdGhpcy5tb2RlbC5nZXQoJ3NpZycpLA0KICAgICAgICAgICAgICAgICAgICBmYWNldFBhcnQsDQogICAgICAgICAgICAgICAgICAgIGRhdGVzLA0KICAgICAgICAgICAgICAgICAgICBpOw0KDQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNpZy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBmYWNldFBhcnQgPSBzaWdbaV0udG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc2guaGFzT3duUHJvcGVydHkoZmFjZXRQYXJ0KSAmJiBoYXNoW2ZhY2V0UGFydF0gIT09ICcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRlcyA9IGhhc2hbZmFjZXRQYXJ0XS5zcGxpdCgifCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGVzWzBdICE9PSAiIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRGF0ZSgkZnJvbURhdGUsIGRhdGVzWzBdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRlc1sxXSAhPT0gIiIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURhdGUoJHRvRGF0ZSwgZGF0ZXNbMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpbHRlcigpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgKiBVcGRhdGVzIGRhdGVwaWNrZXIgZGF0ZQ0KICAgICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeTxEb21FbGVtZW50Pn0gY29udHJvbCBlbGVtZW50IHdoZXJlIHN0YXJ0IGRhdGUgc3BlY2lmaWVkDQogICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBkYXRlIHRoYXQgc2hvdWxkIGJlIHNldCAgDQogICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZmFjZXREYXRlUmFuZ2UuRmFjZXREYXRlUmFuZ2VWaWV3DQogICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6ZmFjZXREYXRlUmFuZ2UuRmFjZXREYXRlUmFuZ2VWaWV3I2hhbmRsZURhdGUNCiAgICAgICAgICAgICovDQogICAgICAgICAgICBoYW5kbGVEYXRlOiBmdW5jdGlvbiAoY29udHJvbCwgdmFsdWUpIHsNCiAgICAgICAgICAgICAgICB2YXIgJGZhY2V0Q2xvc2UgPSB0aGlzLiRlbC5maW5kKCcuZmFjZXQtaGVhZGluZyA+IHNwYW4nKTsNCiAgICAgICAgICAgICAgICBpZiAoY29udHJvbC5sZW5ndGggIT09IDAgJiYgdG9VcmxEYXRlKGNvbnRyb2wuZGF0ZXBpY2tlcignZ2V0RGF0ZScpKSAhPT0gdmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udHJvbC5kYXRlcGlja2VyKCJzZXREYXRlIiwgZnJvbVVybERhdGUodmFsdWUpKTsNCiAgICAgICAgICAgICAgICAgICAgJGZhY2V0Q2xvc2UuYWRkQ2xhc3MoJ2hhcy1hY3RpdmUtZmFjZXQnKTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAiIikgew0KICAgICAgICAgICAgICAgICAgICBjb250cm9sLmRhdGVwaWNrZXIoJ3NldERhdGUnLCBudWxsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBPdmVycmlkZSBkZWZhdWx0IGRhdGVwaWNrZXIgei1pbmRleA0KICAgICAgICAgICAgICogdG8gc2hvdyBkYXRlcGlja2VyIGluIG92ZXJsYXkNCiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZmFjZXREYXRlUmFuZ2UuRmFjZXREYXRlUmFuZ2VWaWV3DQogICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLkZhY2V0RGF0ZVJhbmdlVmlldyNvdmVycmlkZVpJbmRleA0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBvdmVycmlkZVpJbmRleDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciAkZWwgPSAkKCcudWktZGF0ZXBpY2tlcicpLA0KICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSAkZWwuYXR0cignc3R5bGUnKTsNCg0KICAgICAgICAgICAgICAgICAgICAkZWwuYXR0cignc3R5bGUnLCBzdHlsZSArICd6LWluZGV4OiAxMDAwMCAhaW1wb3J0YW50JykNCiAgICAgICAgICAgICAgICB9LCAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAvKioNCiAgICAqIEZvciBlYWNoIHNlYXJjaCBkYXRlIHJhbmdlIG9uIGEgcGFnZSBjcmVhdGVzIGluc3RhbmNlIG9mIA0KICAgICogWyJGYWNldERhdGVSYW5nZU1vZGVsIl17QGxpbmsgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLkZhY2V0RGF0ZVJhbmdlTW9kZWx9IGFuZCANCiAgICAqIFsiRmFjZXREYXRlUmFuZ2VWaWV3Il17QGxpbmsgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLkZhY2V0RGF0ZVJhbmdlVmlld30gDQogICAgKiBAbWVtYmVyT2YgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlDQogICAgKiBAYWxpYXMgbW9kdWxlOmZhY2V0RGF0ZVJhbmdlLmluaXQNCiAgICAqLw0KICAgIGFwaS5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoJCgiYm9keSIpLmhhc0NsYXNzKCJvbi1wYWdlLWVkaXRvciIpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBxdWVyeU1vZGVsID0gWEEuY29tcG9uZW50LnNlYXJjaC5xdWVyeTsNCiAgICAgICAgdXJsSGVscGVyTW9kZWwgPSBYQS5jb21wb25lbnQuc2VhcmNoLnVybDsNCg0KICAgICAgICB2YXIgZmFjZXREYXRlUmFuZ2VzTGlzdCA9ICQoIi5mYWNldC1kYXRlLXJhbmdlOm5vdCguaW5pdGlhbGl6ZWQpIik7DQoNCiAgICAgICAgXy5lYWNoKGZhY2V0RGF0ZVJhbmdlc0xpc3QsIGZ1bmN0aW9uIChlbGVtKSB7DQogICAgICAgICAgICB2YXIgJGVsID0gJChlbGVtKSwNCiAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBGYWNldERhdGVSYW5nZU1vZGVsKCksDQogICAgICAgICAgICAgICAgdmlldyA9IG5ldyBGYWNldERhdGVSYW5nZVZpZXcoeyBlbDogJGVsLCBtb2RlbDogbW9kZWwgfSk7DQoNCiAgICAgICAgICAgIHZpZXcucmVuZGVyKCk7DQoNCiAgICAgICAgICAgICRlbC5hZGRDbGFzcygiaW5pdGlhbGl6ZWQiKTsNCiAgICAgICAgfSk7DQogICAgfTsNCg0KICAgIHJldHVybiBhcGk7DQoNCn0oalF1ZXJ5LCBkb2N1bWVudCkpOw0KDQpYQS5yZWdpc3RlcignZmFjZXREYXRlUmFuZ2UnLCBYQS5jb21wb25lbnQuc2VhcmNoLmZhY2V0LmRhdGVyYW5nZSk7
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 13356
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "ba3f86a2-4a1c-4d78-b63d-91c2779c1b5e"
  Hint: __Sortorder
  Value: 2300
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: "20200319T145446:637202264869227950Z"
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "0bbc3b73-5348-4df4-bd0f-b8367c7bf283"
