---
ID: "f08205d6-126e-49f7-b0da-6d4b3803d28c"
Parent: "dfcbfa5a-2e37-418a-adb7-f411ecae89a9"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Base Themes/SearchTheme/Scripts/component-search-service"
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/F08205D6126E49F7B0DA6D4B3803D28C.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "f08205d6-126e-49f7-b0da-6d4b3803d28c"
  Value: 77u/LyoqDQogKiBNb2RlbCBmb3Igc2VhcmNoIHNlcnZpY2VzDQogKiBAbW9kdWxlIFNlYXJjaFNlcnZpY2VNb2RlbA0KICogQHBhcmFtICB7alF1ZXJ5fSAkIEluc3RhbmNlIG9mIGpRdWVyeQ0KICogQHBhcmFtICB7RG9jdW1lbnR9IGRvY3VtZW50IGRvbSBkb2N1bWVudCBvYmplY3QNCiAqIEByZXR1cm4ge1NlYXJjaFNlcnZpY2VNb2RlbH0gaW5zdGFuY2Ugb2Ygc2VhcmNoIHNlcnZpY2UgbW9kZWwNCiovDQpYQS5jb21wb25lbnQuc2VhcmNoLnNlcnZpY2UgPSAoZnVuY3Rpb24gKCQsIGRvY3VtZW50KSB7DQoNCiAgICAndXNlIHN0cmljdCc7DQoNCiAgICB2YXIgc2VhcmNoUmVzdWx0c01vZGVscyA9IFhBLmNvbXBvbmVudC5zZWFyY2gucmVzdWx0cy5zZWFyY2hSZXN1bHRNb2RlbHMsDQogICAgICAgIHVybEhlbHBlck1vZGVsID0gWEEuY29tcG9uZW50LnNlYXJjaC51cmwsDQogICAgICAgIHF1ZXJ5TW9kZWwgPSBYQS5jb21wb25lbnQuc2VhcmNoLnF1ZXJ5LA0KICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBYQS5jb21wb25lbnQuc2VhcmNoLnBhcmFtZXRlcnMsDQogICAgICAgIGFwaU1vZGVsID0gWEEuY29tcG9uZW50LnNlYXJjaC5hamF4LA0KICAgICAgICBTZWFyY2hTZXJ2aWNlTW9kZWw7DQogICAgLyoqDQogICAgICogQG5hbWUgbW9kdWxlOlNlYXJjaFNlcnZpY2VNb2RlbC5TZWFyY2hTZXJ2aWNlTW9kZWwNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKiBAYXVnbWVudHMgQmFja2JvbmUuTW9kZWwNCiAgICAgKi8NCiAgICBTZWFyY2hTZXJ2aWNlTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoDQogICAgICAgIC8qKiBAbGVuZHMgbW9kdWxlOlNlYXJjaFNlcnZpY2VNb2RlbC5TZWFyY2hTZXJ2aWNlTW9kZWwucHJvdG90eXBlICoqLw0KICAgICAgICB7DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICogRGVmYXVsdCBtb2RlbCBvcHRpb25zDQogICAgICAgICAgICAqIEBkZWZhdWx0DQogICAgICAgICAgICAqLw0KICAgICAgICAgICAgZGVmYXVsdHM6IHsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICogV2F0Y2hlcyBmb3IgZXZlbnQgJ29yZGVyQ2hhbmdlZCcgYW5kIHRyaWdnZXINCiAgICAgICAgICAgICogWydnZXREYXRhJ117QGxpbmsgbW9kdWxlOlNlYXJjaFNlcnZpY2VNb2RlbC5TZWFyY2hTZXJ2aWNlTW9kZWwjZ2V0RGF0YX0NCiAgICAgICAgICAgICogQGxpc3RlbnMgbW9kdWxlOlhBLmNvbXBvbmVudC5zZWFyY2gudmVudH5ldmVudDpvcmRlckNoYW5nZWQNCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpTZWFyY2hTZXJ2aWNlTW9kZWwuU2VhcmNoU2VydmljZU1vZGVsDQogICAgICAgICAgICAqLw0KICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsNCiAgICAgICAgICAgICAgICBYQS5jb21wb25lbnQuc2VhcmNoLnZlbnQub24oJ29yZGVyQ2hhbmdlZCcsIGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoYXQuZ2V0RGF0YShkYXRhKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICogSWYgc2VhcmNoIHJlc3VsdCBtb2RlbCBjcmVhdGVkIGNhbGwNCiAgICAgICAgICAgICogWydnZXRTZWFyY2hSZXN1bHRzRGF0YSdde0BsaW5rIG1vZHVsZTpTZWFyY2hTZXJ2aWNlTW9kZWwuU2VhcmNoU2VydmljZU1vZGVsI2dldFNlYXJjaFJlc3VsdHNEYXRhfQ0KICAgICAgICAgICAgKiBpbiBvdGhlciBjYXNlIGNhbGwgDQogICAgICAgICAgICAqIFsnZ2V0RW5kcG9pbnRBbmRTZWFyY2gnXXtAbGluayBtb2R1bGU6U2VhcmNoU2VydmljZU1vZGVsLlNlYXJjaFNlcnZpY2VNb2RlbCNnZXRFbmRwb2ludEFuZFNlYXJjaH0gDQogICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvdmVycmlkZVByb3BzIG5ldyBwcm9wZXJ0aWVzIGZybyBvdmVycmlkaW5nDQogICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6U2VhcmNoU2VydmljZU1vZGVsLlNlYXJjaFNlcnZpY2VNb2RlbA0KICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOlNlYXJjaFNlcnZpY2VNb2RlbC5TZWFyY2hTZXJ2aWNlTW9kZWwjZ2V0RGF0YQ0KICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGdldERhdGE6IGZ1bmN0aW9uIChvdmVycmlkZVByb3BzKSB7DQogICAgICAgICAgICAgICAgaWYgKHNlYXJjaFJlc3VsdHNNb2RlbHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFNlYXJjaFJlc3VsdHNEYXRhKG92ZXJyaWRlUHJvcHMpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RW5kcG9pbnRBbmRTZWFyY2gob3ZlcnJpZGVQcm9wcyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgKiBQcm9jZXNzZXMgc2VhcmNoIHJlc3VsdCBkYXRhDQogICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvdmVycmlkZVByb3BzIHByb3BlcnRpZXMgZm9yIG92ZXJyaWRpbmcNCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpTZWFyY2hTZXJ2aWNlTW9kZWwuU2VhcmNoU2VydmljZU1vZGVsDQogICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6U2VhcmNoU2VydmljZU1vZGVsLlNlYXJjaFNlcnZpY2VNb2RlbCNnZXRTZWFyY2hSZXN1bHRzRGF0YQ0KICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGdldFNlYXJjaFJlc3VsdHNEYXRhOiBmdW5jdGlvbiAob3ZlcnJpZGVQcm9wcykgew0KICAgICAgICAgICAgICAgIHZhciBoYXNoID0gcXVlcnlNb2RlbC5wYXJzZUhhc2hQYXJhbWV0ZXJzKHdpbmRvdy5sb2NhdGlvbi5oYXNoKSwNCiAgICAgICAgICAgICAgICAgICAgdGhhdCA9IHRoaXMsDQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRTb3J0T3JkZXIsDQogICAgICAgICAgICAgICAgICAgIG9mZnNldFNpZ25hdHVyZSwNCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0c0RlZmF1bHRQYWdlU2l6ZSwNCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0c0RlZmF1bHRWYXJpYW50LA0KICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmUsDQogICAgICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzLA0KICAgICAgICAgICAgICAgICAgICB1cmw7DQoNCiAgICAgICAgICAgICAgICBfLmVhY2goc2VhcmNoUmVzdWx0c01vZGVscywgZnVuY3Rpb24gKHNlYXJjaE1vZGVsKSB7DQogICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZSA9IHNlYXJjaE1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKS5zaWcgIT09IG51bGwNCiAgICAgICAgICAgICAgICAgICAgICAgID8gZW5jb2RlVVJJQ29tcG9uZW50KHNlYXJjaE1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKS5zaWcpDQogICAgICAgICAgICAgICAgICAgICAgICA6ICIiOw0KICAgICAgICAgICAgICAgICAgICBvZmZzZXRTaWduYXR1cmUgPSBzaWduYXR1cmUgIT09ICcnID8gc2lnbmF0dXJlICsgIl9lIiA6ICJlIjsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoIXNlYXJjaE1vZGVsLmdldCgnZGF0YVByb3BlcnRpZXMnKS5hdXRvRmlyZVNlYXJjaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiBoYXNoIGlzIG5vdCBwcmVzZW50IG9yIG5vIGNyaXRlcmlhIHdpdGggc2VhcmNoIG1vZGVsIHNpZ25hdHVyZSBpcyBwcmVzZW50IGluIGhhc2gsIHRoZW4gZG8gbm90IGZpcmUgc2VhcmNoDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc2ggfHwgIXF1ZXJ5TW9kZWwuaXNTaWduYXR1cmVQcmVzZW50SW5IYXNoKGhhc2gsIHNpZ25hdHVyZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U29ydE9yZGVyID0gc2VhcmNoTW9kZWwuZ2V0KCdkYXRhUHJvcGVydGllcycpLmRlZmF1bHRTb3J0T3JkZXI7DQogICAgICAgICAgICAgICAgICAgIHNlYXJjaFJlc3VsdHNEZWZhdWx0UGFnZVNpemUgPSBzZWFyY2hNb2RlbC5nZXQoJ2RhdGFQcm9wZXJ0aWVzJykucDsNCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0c0RlZmF1bHRWYXJpYW50ID0gc2VhcmNoTW9kZWwuZ2V0KCdkYXRhUHJvcGVydGllcycpLnY7DQoNCiAgICAgICAgICAgICAgICAgICAgLy9pZiB3ZSBoYXZlIHNpbmdsZVJlcXVlc3RNb2RlIHdpdGggc2lnbmF0dXJlLCB0aGVuIHdlIGFyZSBnZXR0aW5nIGRhdGEganVzdCBmb3IgdGhhdCBzaWduYXR1cmUNCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvdmVycmlkZVByb3BzICE9PSAidW5kZWZpbmVkIiAmJg0KICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVQcm9wcy5oYXNPd25Qcm9wZXJ0eSgic2luZ2xlUmVxdWVzdE1vZGUiKSAmJg0KICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVQcm9wc1sic2luZ2xlUmVxdWVzdE1vZGUiXSAhPSBzaWduYXR1cmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vaWYgdGhlcmUgaXMgbm8gcGFnZSBzaXplIHBhcmFtIGluIHRoZSBxdWVyeSwgYnV0IHdlIGhhdmUgcGFnZSBzaXplIGNvbXBvbmVudCBvbiB0aGUgcGFnZSwgdGhlbiB0YWtlDQogICAgICAgICAgICAgICAgICAgIC8vZGVmYXVsdCBwYWdlIHNpemUgb3IgZmlyc3QgKGlmIGRlZmF1bHQgaXNuJ3Qgc2V0KQ0KICAgICAgICAgICAgICAgICAgICBoYXNoID0gdGhhdC5nZXREZWZhdWx0RGVmYXVsdFBhZ2VTaXplKHNpZ25hdHVyZSwgc2VhcmNoUmVzdWx0c0RlZmF1bHRQYWdlU2l6ZSwgaGFzaCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy9pbiBjYXNlIG9mIGZhY2V0IHRoYXQgZmlsdGVycyBpdGVtcyBieSBsYW5ndWFnZQ0KICAgICAgICAgICAgICAgICAgICAvL3doZW4gc29tZW9uZSBpcyBmaWx0ZXJpbmcgYnkgY2VydGFpbiBsYW5ndWFnZSwgYW5kIHJlbW92ZXMgdGhhdCBmaWx0ZXIsIHRoZW4gd2l0aG91dA0KICAgICAgICAgICAgICAgICAgICAvL3RoaXMgaWYgc3RhdGVtZW50LCBzZWFyY2ggcmVzdWx0cyBsYW5ndWFnZSBwYXJhbWV0ZXIgd291bGQgbm90IGJlIGNvbnNpZGVyZWQgLSBiZWNhdXNlIGw9IiIgZnJvbSBoYXNoIG9iamVjdA0KICAgICAgICAgICAgICAgICAgICAvL3dpbGwgb3ZlcnJpZGUgZGVmYXVsdCBsYW5ndWFnZSBmcm9tIGRhdGFQcm9wZXJ0aWVzDQogICAgICAgICAgICAgICAgICAgIGlmIChoYXNoLmhhc093blByb3BlcnR5KCdsJykgJiYgaGFzaC5sID09PSAnJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaGFzaC5sID0gc2VhcmNoTW9kZWwuZ2V0KCdkYXRhUHJvcGVydGllcycpLmw7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBtZXJnZWRQcm9wcyA9ICQuZXh0ZW5kKHt9LCBzZWFyY2hNb2RlbC5nZXQoJ2RhdGFQcm9wZXJ0aWVzJyksIGhhc2gpOw0KICAgICAgICAgICAgICAgICAgICBtZXJnZWRQcm9wcyA9ICQuZXh0ZW5kKG1lcmdlZFByb3BzLCBvdmVycmlkZVByb3BzKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAobWVyZ2VkUHJvcHMuaGFzT3duUHJvcGVydHkoJ2xvYWRNb3JlJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaE1vZGVsLnNldCgnbG9hZE1vcmUnLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXJnZWRQcm9wcy5sb2FkTW9yZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld09mZnNldCA9IHNlYXJjaE1vZGVsLmdldCgnbG9hZE1vcmVPZmZzZXQnKSArIG1lcmdlZFByb3BzLnA7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hNb2RlbC5zZXQoJ2xvYWRNb3JlT2Zmc2V0JywgbmV3T2Zmc2V0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzW29mZnNldFNpZ25hdHVyZV0gPSBuZXdPZmZzZXQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VhcmNoTW9kZWwuZ2V0KCdsb2FkTW9yZU9mZnNldCcpKSB7IC8vaWYgcmVzdWx0cyByZWxvYWQgaXMgY2F1c2VkIGJ5IHZhcmlhbnQgY2hhbmdlLCBsb2FkTW9yZU9mZnNldCBzaG91bGQgYmUgY29uc2lkZXJlZCBpbiByZXF1ZXN0LCBzbyBhZnRlciBjaGFuZ2luZyB2YXJpYW50LCB0aGUgc2FtZSBudW1iZXIgb2YgcmVzdWx0cyB3aWxsIGJlIHZpc2libGUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZWRQcm9wcy5wICE9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUHJvcHMucCA9IG1lcmdlZFByb3BzLnAgKiAoMSArIHNlYXJjaE1vZGVsLmdldCgnbG9hZE1vcmVPZmZzZXQnKSAvIG1lcmdlZFByb3BzLnApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzW29mZnNldFNpZ25hdHVyZV0gPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaE1vZGVsLnNldCgnbG9hZE1vcmVPZmZzZXQnLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXJnZWRQcm9wcy52YXJpYW50Q2hhbmdlZDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzID0gdGhhdC5nZXRTb3J0T3JkZXIoc2lnbmF0dXJlLCBtZXJnZWRQcm9wcywgZGVmYXVsdFNvcnRPcmRlcik7DQogICAgICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzID0gdGhhdC5zZXRWYXJpYW50KHNpZ25hdHVyZSwgbWVyZ2VkUHJvcHMsIHNlYXJjaFJlc3VsdHNEZWZhdWx0VmFyaWFudCk7DQoNCiAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsSGVscGVyTW9kZWwuY3JlYXRlU2VhcmNoVXJsKG1lcmdlZFByb3BzLCBzaWduYXR1cmUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXVybCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWFyY2hNb2RlbC5jaGVja0Jsb2NraW5nUmVxdWVzdCgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hNb2RlbC5ibG9ja1JlcXVlc3RzKHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgWEEuY29tcG9uZW50LnNlYXJjaC52ZW50LnRyaWdnZXIoJ3Jlc3VsdHMtbG9hZGluZycsIHNlYXJjaE1vZGVsLmNpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBhcGlNb2RlbC5nZXREYXRhKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5TaWduYXR1cmUgPSBkYXRhLlNpZ25hdHVyZSAhPT0gbnVsbCA/IGRhdGEuU2lnbmF0dXJlIDogJyc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhBLmNvbXBvbmVudC5zZWFyY2gudmVudC50cmlnZ2VyKCdyZXN1bHRzLWxvYWRlZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDb3VudDogZGF0YS5Db3VudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEuUmVzdWx0cywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiBkYXRhLlNpZ25hdHVyZSAhPT0gJycgJiYgbWVyZ2VkUHJvcHMuaGFzT3duUHJvcGVydHkoZGF0YS5TaWduYXR1cmUgKyAnX3AnKSA/IG1lcmdlZFByb3BzW2RhdGEuU2lnbmF0dXJlICsgJ19wJ10gOiBtZXJnZWRQcm9wcy5wLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBkYXRhLlNpZ25hdHVyZSAhPT0gJycgJiYgbWVyZ2VkUHJvcHMuaGFzT3duUHJvcGVydHkoZGF0YS5TaWduYXR1cmUgKyAnX2UnKSA/IG1lcmdlZFByb3BzW2RhdGEuU2lnbmF0dXJlICsgJ19lJ10gOiBtZXJnZWRQcm9wcy5lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0c1NpZ25hdHVyZTogZGF0YS5TaWduYXR1cmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkTW9yZTogc2VhcmNoTW9kZWwuZ2V0KCdsb2FkTW9yZScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAqIFByb2Nlc3NlcyBzZWFyY2ggcmVzdWx0IGRhdGEuIENhbGwgZm9yIGFwaU1vZGVsLmdldERhdGENCiAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG92ZXJyaWRlUHJvcHMgcHJvcGVydGllcyBmb3Igb3ZlcnJpZGluZw0KICAgICAgICAgICAgKiBAZmlyZXMgWEEuY29tcG9uZW50LnNlYXJjaC52ZW50I3Jlc3VsdHMtbG9hZGVkDQogICAgICAgICAgICAqIEBsaXN0ZW5zIG1vZHVsZTpYQS5jb21wb25lbnQuc2VhcmNoLnZlbnR+ZXZlbnQ6b3JkZXJDaGFuZ2VkDQogICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6U2VhcmNoU2VydmljZU1vZGVsLlNlYXJjaFNlcnZpY2VNb2RlbA0KICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOlNlYXJjaFNlcnZpY2VNb2RlbC5TZWFyY2hTZXJ2aWNlTW9kZWwjZ2V0U2VhcmNoRGF0YQ0KICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGdldFNlYXJjaERhdGE6IGZ1bmN0aW9uIChvdmVycmlkZVByb3BzKSB7DQogICAgICAgICAgICAgICAgdmFyIGhhc2ggPSBxdWVyeU1vZGVsLnBhcnNlSGFzaFBhcmFtZXRlcnMod2luZG93LmxvY2F0aW9uLmhhc2gpLA0KICAgICAgICAgICAgICAgICAgICBtZXJnZWRQcm9wcyA9ICQuZXh0ZW5kKHt9LCBoYXNoLCBtZXJnZWRQcm9wcywgb3ZlcnJpZGVQcm9wcyksDQogICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZXMgPSBbXSwNCiAgICAgICAgICAgICAgICAgICAgZmlyc3RTb3J0aW5nT3B0aW9uLA0KICAgICAgICAgICAgICAgICAgICB1cmwsDQogICAgICAgICAgICAgICAgICAgIGk7DQoNCg0KICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzID0gdGhpcy5nZXREZWZhdWx0RGVmYXVsdFBhZ2VTaXplKCIiLCAwLCBtZXJnZWRQcm9wcyk7DQoNCg0KICAgICAgICAgICAgICAgIC8vaWYgdGhlcmUgaXMgbm8gc29ydCBwYXJhbSBpbiB0aGUgcXVlcnksIGJ1dCB3ZSBoYXZlIHNvcnQgcmVzdWx0cyBjb21wb25lbnQgb24gdGhlIHBhZ2UsIHRoZW4gdGFrZSBmaXJzdCBzb3J0aW5nIG9wdGlvbg0KICAgICAgICAgICAgICAgIGlmICghbWVyZ2VkUHJvcHMuaGFzT3duUHJvcGVydHkoJ28nKSAmJiB0eXBlb2YgWEEuY29tcG9uZW50LnNlYXJjaC5zb3J0ICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgICAgICBmaXJzdFNvcnRpbmdPcHRpb24gPSBYQS5jb21wb25lbnQuc2VhcmNoLnNvcnQuZ2V0Rmlyc3RTb3J0aW5nT3B0aW9uKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdFNvcnRpbmdPcHRpb24gIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRQcm9wcy5vID0gZmlyc3RTb3J0aW5nT3B0aW9uOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy9jdXJyZW50bHkgd2UgYXJlIHRha2luZyBlbmRwb2ludCBmcm9tIE1hcCBjb21wb25lbnQgKGF0bSBpdCdzIG9ubHkgd2hpY2ggY2FuIGhhbmRsZSBzaG93aW5nIG9mIHNlYXJjaCByZXN1bHRzKQ0KICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzLmVuZHBvaW50ID0gWEEuY29tcG9uZW50Lm1hcC5nZXRTZWFyY2hFbmRwb2ludCgpOw0KICAgICAgICAgICAgICAgIC8vdGhlIHNhbWUgd2l0aCBzaWduYXR1cmUNCiAgICAgICAgICAgICAgICBzaWduYXR1cmVzID0gWEEuY29tcG9uZW50Lm1hcC5nZXRTaWduYXR1cmVzKCk7DQoNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2lnbmF0dXJlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBtZXJnZWRQcm9wcy5zaWcgPSBzaWduYXR1cmVzW2ldOw0KICAgICAgICAgICAgICAgICAgICB1cmwgPSB1cmxIZWxwZXJNb2RlbC5jcmVhdGVTZWFyY2hVcmwobWVyZ2VkUHJvcHMsIHNpZ25hdHVyZXNbaV0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICghdXJsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBhcGlNb2RlbC5nZXREYXRhKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuU2lnbmF0dXJlID0gZGF0YS5TaWduYXR1cmUgIT09IG51bGwgPyBkYXRhLlNpZ25hdHVyZSA6ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhBLmNvbXBvbmVudC5zZWFyY2gudmVudC50cmlnZ2VyKCdyZXN1bHRzLWxvYWRlZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNvdW50OiBkYXRhLkNvdW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLlJlc3VsdHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiBtZXJnZWRQcm9wcy5wLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFJlc3VsdHNTaWduYXR1cmU6IGRhdGEuU2lnbmF0dXJlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAqIENoZWNrcyBpZiBtYXAgY29tcG9uZW50IGV4aXN0cyBhbmQgZ2V0U2VhcmNoRW5kcG9pbnQgcmV0dXJucyBub3QgdW5kZWZpbmVkIHZhbHVlLiBJZiB5ZXMNCiAgICAgICAgICAgKiBjYWxsIFsiZ2V0U2VhcmNoRGF0YSJde0BsaW5rIG1vZHVsZTpTZWFyY2hTZXJ2aWNlTW9kZWwuU2VhcmNoU2VydmljZU1vZGVsI2dldFNlYXJjaERhdGF9DQogICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpTZWFyY2hTZXJ2aWNlTW9kZWwuU2VhcmNoU2VydmljZU1vZGVsDQogICAgICAgICAgICogQGFsaWFzIG1vZHVsZTpTZWFyY2hTZXJ2aWNlTW9kZWwuU2VhcmNoU2VydmljZU1vZGVsI2dldEVuZHBvaW50QW5kU2VhcmNoDQogICAgICAgICAgICovDQogICAgICAgICAgICBnZXRFbmRwb2ludEFuZFNlYXJjaDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGlmIChYQS5jb21wb25lbnQubWFwICYmIHR5cGVvZiAoWEEuY29tcG9uZW50Lm1hcC5nZXRTZWFyY2hFbmRwb2ludCgpKSAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTZWFyY2hEYXRhKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLmdldEVuZHBvaW50QW5kU2VhcmNoLmJpbmQodGhpcyksIDEwMCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgKiBTb3J0cyBzZWFyY2ggcmVzdWx0IGR1ZSB0byBzZWxlY3RlZCBwcm9wZXJ0aWVzDQogICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduYXR1cmUgY29tcG9uZW50IHNpZ25hdHVyZQ0KICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gbWVyZ2VkUHJvcHMgDQogICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hSZXN1bHRzRGVmYXVsdFNvcnRPcmRlciBkZWZhdWx0IHNvcnRpbmcgb3JkZXINCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpTZWFyY2hTZXJ2aWNlTW9kZWwuU2VhcmNoU2VydmljZU1vZGVsDQogICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6U2VhcmNoU2VydmljZU1vZGVsLlNlYXJjaFNlcnZpY2VNb2RlbCNnZXRTb3J0T3JkZXINCiAgICAgICAgICAgICogQHJldHVybnMge09iamVjdH0gbWVyZ2VkIHByb3BlcnRpZXMNCiAgICAgICAgICAgICovDQogICAgICAgICAgICBnZXRTb3J0T3JkZXI6IGZ1bmN0aW9uIChzaWduYXR1cmUsIG1lcmdlZFByb3BzLCBzZWFyY2hSZXN1bHRzRGVmYXVsdFNvcnRPcmRlcikgew0KICAgICAgICAgICAgICAgIHZhciBmaXJzdFNvcnRpbmdPcHRpb24gPSBYQS5jb21wb25lbnQuc2VhcmNoLnNvcnQuZ2V0Rmlyc3RTb3J0aW5nT3B0aW9uKHNpZ25hdHVyZSksDQogICAgICAgICAgICAgICAgICAgIHBhcmFtTmFtZSA9IHNpZ25hdHVyZSAhPT0gJycgPyBzaWduYXR1cmUgKyAnX28nIDogJ28nLA0KICAgICAgICAgICAgICAgICAgICBvYmogPSB7fSwNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFNvcnRPcmRlciA9ICIiLA0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2lnbmVkID0ge307DQoNCg0KICAgICAgICAgICAgICAgIGlmIChmaXJzdFNvcnRpbmdPcHRpb24gIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRTb3J0T3JkZXIgPSBmaXJzdFNvcnRpbmdPcHRpb247DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hSZXN1bHRzRGVmYXVsdFNvcnRPcmRlciAhPT0gIiIpIHsNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFNvcnRPcmRlciA9IHNlYXJjaFJlc3VsdHNEZWZhdWx0U29ydE9yZGVyOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghbWVyZ2VkUHJvcHMuaGFzT3duUHJvcGVydHkocGFyYW1OYW1lKSAmJiBkZWZhdWx0U29ydE9yZGVyICE9PSAiIikgew0KICAgICAgICAgICAgICAgICAgICBkZWxldGUgbWVyZ2VkUHJvcHMuZGVmYXVsdFNvcnRPcmRlcjsNCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG1lcmdlZFByb3BzLm87DQoNCiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUHJvcHNbcGFyYW1OYW1lXSA9IGRlZmF1bHRTb3J0T3JkZXI7DQogICAgICAgICAgICAgICAgICAgIG9ialtwYXJhbU5hbWVdID0gZGVmYXVsdFNvcnRPcmRlcjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZGVmYXVsdFNpZ25lZFtwYXJhbU5hbWVdID0gZGVmYXVsdFNvcnRPcmRlcjsNCiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMucmVnaXN0ZXJEZWZhdWx0KGRlZmF1bHRTaWduZWQpOw0KDQogICAgICAgICAgICAgICAgcmV0dXJuIG1lcmdlZFByb3BzOw0KICAgICAgICAgICAgfSwNCg0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAqIFNldHMgZGVmYXVsdCBwYWdlIHNpemUgaW50byBoYXNoDQogICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduYXR1cmUgY29tcG9uZW50IHNpZ25hdHVyZQ0KICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc2VhcmNoUmVzdWx0c0RlZmF1bHRQYWdlU2l6ZSAgZGVmYXVsdCBwYWdlIHNpemUNCiAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhhc2ggaGFzaCByZXByZXNlbnRlZCBhcyBhbiBvYmplY3QNCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpTZWFyY2hTZXJ2aWNlTW9kZWwuU2VhcmNoU2VydmljZU1vZGVsDQogICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6U2VhcmNoU2VydmljZU1vZGVsLlNlYXJjaFNlcnZpY2VNb2RlbCNnZXREZWZhdWx0RGVmYXVsdFBhZ2VTaXplDQogICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IGhhc2ggb2JqZWN0DQogICAgICAgICAgICAqLw0KICAgICAgICAgICAgZ2V0RGVmYXVsdERlZmF1bHRQYWdlU2l6ZTogZnVuY3Rpb24gKHNpZ25hdHVyZSwgc2VhcmNoUmVzdWx0c0RlZmF1bHRQYWdlU2l6ZSwgaGFzaCkgew0KICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0UGFnZVNpemVzID0gWEEuY29tcG9uZW50LnNlYXJjaC5wYWdlU2l6ZS5nZXREZWZhdWx0UGFnZVNpemVzKCksDQogICAgICAgICAgICAgICAgICAgIHBhcmFtTmFtZSA9IHNpZ25hdHVyZSAhPT0gIiIgPyBzaWduYXR1cmUgKyAiX3AiIDogInAiLA0KICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZXM7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWhhc2guaGFzT3duUHJvcGVydHkocGFyYW1OYW1lKSAmJiB0eXBlb2YgWEEuY29tcG9uZW50LnNlYXJjaC5wYWdlU2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRQYWdlU2l6ZXMgIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZXMgPSBkZWZhdWx0UGFnZVNpemVzLmZpbHRlcihmdW5jdGlvbiAoeCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4LnNpZ25hdHVyZXMuaW5kZXhPZihzaWduYXR1cmUpICE9PSAtMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VTaXplcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaFtwYXJhbU5hbWVdID0gcGFnZVNpemVzWzBdLmRlZmF1bHRQYWdlU2l6ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghaGFzaC5oYXNPd25Qcm9wZXJ0eShwYXJhbU5hbWUpICYmIHNlYXJjaFJlc3VsdHNEZWZhdWx0UGFnZVNpemUgIT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBoYXNoW3BhcmFtTmFtZV0gPSBzZWFyY2hSZXN1bHRzRGVmYXVsdFBhZ2VTaXplOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0UGFyYW0gPSB7fTsNCiAgICAgICAgICAgICAgICBkZWZhdWx0UGFyYW1bcGFyYW1OYW1lXSA9IHNlYXJjaFJlc3VsdHNEZWZhdWx0UGFnZVNpemU7DQogICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnJlZ2lzdGVyRGVmYXVsdChkZWZhdWx0UGFyYW0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBoYXNoOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgKiBTZXRzIHZhcmlhbnQgb2YgdmlldyBzZWFyY2ggcmVzdWx0IGJhc2VkIG9uIHZhcmlhbnQgc2VsZWN0b3IgY29tcG9uZW50DQogICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduYXR1cmUgY29tcG9uZW50IHNpZ25hdHVyZQ0KICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc2VhcmNoUmVzdWx0c0RlZmF1bHRQYWdlU2l6ZSAgZGVmYXVsdCBwYWdlIHNpemUNCiAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhhc2ggaGFzaCByZXByZXNlbnRlZCBhcyBhbiBvYmplY3QNCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpTZWFyY2hTZXJ2aWNlTW9kZWwuU2VhcmNoU2VydmljZU1vZGVsDQogICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6U2VhcmNoU2VydmljZU1vZGVsLlNlYXJjaFNlcnZpY2VNb2RlbCNzZXRWYXJpYW50DQogICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IGhhc2ggb2JqZWN0DQogICAgICAgICAgICAqLw0KICAgICAgICAgICAgc2V0VmFyaWFudDogZnVuY3Rpb24gKHNpZ25hdHVyZSwgbWVyZ2VkUHJvcHMsIHNlYXJjaFJlc3VsdHNEZWZhdWx0VmFyaWFudCkgew0KICAgICAgICAgICAgICAgIHZhciB2YXJpYW50TWFwcGluZ3MgPSBYQS5jb21wb25lbnQuc2VhcmNoLnZhcmlhbnRGaWx0ZXIuZ2V0VmFyaWFudE1hcHBpbmdzKHNpZ25hdHVyZSksDQogICAgICAgICAgICAgICAgICAgIHBhcmFtTmFtZSA9IHNpZ25hdHVyZSAhPT0gIiIgPyBzaWduYXR1cmUgKyAiX3YiIDogInYiLA0KICAgICAgICAgICAgICAgICAgICB2YXJpYW50SW5kZXg7DQoNCiAgICAgICAgICAgICAgICBpZiAoc2lnbmF0dXJlID09PSAiIiAmJiAkLmlzRW1wdHlPYmplY3QodmFyaWFudE1hcHBpbmdzKSkgew0KICAgICAgICAgICAgICAgICAgICAvL3RoZXJlIGlzIG5vIHNpZ25hdHVyZSwgYW5kIG5vIHZhcmlhbnQgc2VsZWN0b3Igb24gdGhlIHBhZ2UsIHRoZXJlZm9yZSwgZG8gbm90aGluZyAtIG1lcmdlZFByb3BlcyBzaG91bGQgaGF2ZSB2IHBhcmFtDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaWduYXR1cmUgPT09ICIiICYmIG1lcmdlZFByb3BzLmhhc093blByb3BlcnR5KHBhcmFtTmFtZSkgJiYgdmFyaWFudE1hcHBpbmdzLmhhc093blByb3BlcnR5KG1lcmdlZFByb3BzW3BhcmFtTmFtZV0pKSB7DQogICAgICAgICAgICAgICAgICAgIC8vdGhlcmUgaXMgbm8gc2lnbmF0dXJlLCBidXQgdGhlcmUgaXMgdmFyaWFudCBzZWxlY3RvciBvbiB0aGUgcGFnZSwgYW5kIGl0IHdhcyBjbGlja2VkDQogICAgICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzW3BhcmFtTmFtZV0gPSB2YXJpYW50TWFwcGluZ3NbbWVyZ2VkUHJvcHNbcGFyYW1OYW1lXV0uaWQ7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaWduYXR1cmUgPT09ICIiICYmIHZhcmlhbnRNYXBwaW5ncy5oYXNPd25Qcm9wZXJ0eSgwKSkgew0KICAgICAgICAgICAgICAgICAgICAvL3RoZXJlIGlzIG5vIHNpZ25hdHVyZSwgYnV0IHRoZXJlIGlzIHZhcmlhbnQgc2VsZWN0b3Igb24gdGhlIHBhZ2UsIHRoZXJlZm9yZSB0YWtlIGl0cyBmaXJzdCB2YXJpYW50DQogICAgICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzW3BhcmFtTmFtZV0gPSB2YXJpYW50TWFwcGluZ3NbMF0uaWQ7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG1lcmdlZFByb3BzLnY7DQogICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZWRQcm9wcy5oYXNPd25Qcm9wZXJ0eShwYXJhbU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvL3ZhcmlhbnQgc3dpdGNoZXIgd2FzIGNsaWNrZWQNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFByb3BzW3BhcmFtTmFtZV0gPSB2YXJpYW50TWFwcGluZ3NbbWVyZ2VkUHJvcHNbcGFyYW1OYW1lXV0uaWQ7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZXJlIGlzIHZhcmlhbnQgc2VsZWN0b3Igb24gdGhlIHBhZ2UsIHRha2UgZmlyc3QgdmFyaWFudCBmb3JtIHRoZSBjb21wb25lbnQsIG90aGVyd2lzZSB1c2Ugc2VhcmNoIHJlc3VsdHMgZGVmYXVsdCB2YXJpYW50DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFudE1hcHBpbmdzLmhhc093blByb3BlcnR5KDApKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUHJvcHNbcGFyYW1OYW1lXSA9IHZhcmlhbnRNYXBwaW5nc1swXS5pZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUHJvcHNbcGFyYW1OYW1lXSA9IHNlYXJjaFJlc3VsdHNEZWZhdWx0VmFyaWFudDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0VmFyaWFudCA9IHt9Ow0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYXJpYW50W3BhcmFtTmFtZV0gPSAwOw0KICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5yZWdpc3RlckRlZmF1bHQoZGVmYXVsdFZhcmlhbnQpOw0KDQogICAgICAgICAgICAgICAgcmV0dXJuIG1lcmdlZFByb3BzOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgIHJldHVybiBuZXcgU2VhcmNoU2VydmljZU1vZGVsKCk7DQoNCn0oalF1ZXJ5LCBkb2N1bWVudCkpOw0K
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 18012
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "ba3f86a2-4a1c-4d78-b63d-91c2779c1b5e"
  Hint: __Sortorder
  Value: 2100
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160728T134138Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "382b4043-0061-460a-8c21-714f3641716c"
