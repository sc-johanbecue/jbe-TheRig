---
ID: "34b24332-2fda-4e9a-9c74-867f0901c6cf"
Parent: "dfcbfa5a-2e37-418a-adb7-f411ecae89a9"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Base Themes/SearchTheme/Scripts/component-search-facet-dropdown"
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/34B243322FDA4E9A9C74867F0901C6CF.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "34b24332-2fda-4e9a-9c74-867f0901c6cf"
  Value: LyoqCiAqIEZhY2V0IGRyb3Bkb3duIGNvbXBvbmVudCBmdW5jdGlvbmFsaXR5CiAqIEBtb2R1bGUgZHJvcGRvd24KICogQHBhcmFtICB7alF1ZXJ5fSAkIEluc3RhbmNlIG9mIGpRdWVyeQogKiBAcGFyYW0gIHtEb2N1bWVudH0gZG9jdW1lbnQgZG9tIGRvY3VtZW50IG9iamVjdAogKiBAcmV0dXJuIHtPYmplY3R9IGxpc3Qgb2YgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIGNvbXBvbmVudCBkcm9wZG93bgoqLwpYQS5jb21wb25lbnQuc2VhcmNoLmZhY2V0LmRyb3Bkb3duID0gKGZ1bmN0aW9uICgkLCBkb2N1bWVudCkgewoKICAgICJ1c2Ugc3RyaWN0IjsKICAgIC8qKgogICAgKiBUaGlzIG9iamVjdCBzdG9yZXMgYWxsIHB1YmxpYyBhcGkgbWV0aG9kcwogICAgKiBAdHlwZSB7T2JqZWN0LjxNZXRob2RzPn0KICAgICogQG1lbWJlck9mIG1vZHVsZTpkcm9wZG93bgogICAgKi8KICAgIHZhciBhcGkgPSB7fSwKICAgICAgICB1cmxIZWxwZXJNb2RlbCwKICAgICAgICBxdWVyeU1vZGVsCiAgICAvKioKICAgICogQG5hbWUgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25Nb2RlbAogICAgKiBAY29uc3RydWN0b3IKICAgICogQGF1Z21lbnRzIEJhY2tib25lLk1vZGVsCiAgICAqLwogICAgdmFyIEZhY2V0RHJvcGRvd25Nb2RlbCA9IFhBLmNvbXBvbmVudC5zZWFyY2guYmFzZU1vZGVsLmV4dGVuZCgKICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duTW9kZWwucHJvdG90eXBlICoqLwogICAgICAgIHsKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICogRGVmYXVsdCBtb2RlbCBvcHRpb25zCiAgICAgICAgICAgICogQGRlZmF1bHQKICAgICAgICAgICAgKi8KICAgICAgICAgICAgZGVmYXVsdHM6IHsKICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAiPCUgXy5mb3JFYWNoKHJlc3VsdHMsIGZ1bmN0aW9uKHJlc3VsdCl7IiArCiAgICAgICAgICAgICAgICAgICAgIiU+PG9wdGlvbiBkYXRhLWZhY2V0TmFtZT1cIjwlPSByZXN1bHQuTmFtZSAhPT0gJycgPyBlbmNvZGVVUklDb21wb25lbnQocmVzdWx0Lk5hbWUpIDogJ19lbXB0eV8nICU+XCIgPCU9IHJlc3VsdC5TZWxlY3RlZCAhPT0gdW5kZWZpbmVkID8gJ3NlbGVjdGVkJyA6ICcnICU+ID48JT0gcmVzdWx0Lk5hbWUgIT09ICcnID8gc2FuaXRpemUocmVzdWx0Lk5hbWUpIDogZW1wdHlUZXh0ICU+ICg8JT0gcmVzdWx0LkNvdW50ICU+KTwvb3B0aW9uPjwlIiArCiAgICAgICAgICAgICAgICAgICAgIn0pOyAlPiIsCiAgICAgICAgICAgICAgICBkYXRhUHJvcGVydGllczoge30sCiAgICAgICAgICAgICAgICBibG9ja05leHRSZXF1ZXN0OiBmYWxzZSwKICAgICAgICAgICAgICAgIHJlc3VsdERhdGE6IHt9LAogICAgICAgICAgICAgICAgb3B0aW9uU2VsZWN0ZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgc2lnOiBbXQogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogTGlzdGVucyB0byBjaGFuZ2VzIG9uIGZhY2V0cyBhbmQgaGFzaAogICAgICAgICAgICAqIEBsaXN0ZW5zIG1vZHVsZTpYQS5jb21wb25lbnQuc2VhcmNoLnZlbnR+ZXZlbnQ6ZmFjZXQtZGF0YS1sb2FkZWQKICAgICAgICAgICAgKiBAbGlzdGVucyBtb2R1bGU6WEEuY29tcG9uZW50LnNlYXJjaC52ZW50fmV2ZW50OmZhY2V0LWRhdGEtZmlsdGVyZWQKICAgICAgICAgICAgKiBAbGlzdGVucyBtb2R1bGU6WEEuY29tcG9uZW50LnNlYXJjaC52ZW50fmV2ZW50OmZhY2V0LWRhdGEtcGFydGlhbC1maWx0ZXJlZAogICAgICAgICAgICAqIEBsaXN0ZW5zIG1vZHVsZTpYQS5jb21wb25lbnQuc2VhcmNoLnZlbnR+ZXZlbnQ6aGFzaENoYW5nZWQKICAgICAgICAgICAgKi8KICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy9FdmVudCB0byBnZXQgZGF0YSBhdCB0aGUgYmVnaW5pbmcgb3Igd2hlbiB0aGVyZSBhcmUgbm8gaGFzaCBwYXJhbWV0ZXJzIGluIHRoZSB1cmwgLSBvbmUgcmVxdWVzdCBmb3IgYWxsIGNvbnRyb2xzCiAgICAgICAgICAgICAgICBYQS5jb21wb25lbnQuc2VhcmNoLnZlbnQub24oImZhY2V0LWRhdGEtbG9hZGVkIiwgdGhpcy5wcm9jZXNzRGF0YS5iaW5kKHRoaXMsIGZhbHNlKSk7CgogICAgICAgICAgICAgICAgLy9FdmVudCB0byBnZXQgZmlsdGVyZWQgZGF0YQogICAgICAgICAgICAgICAgWEEuY29tcG9uZW50LnNlYXJjaC52ZW50Lm9uKCJmYWNldC1kYXRhLWZpbHRlcmVkIiwgdGhpcy5wcm9jZXNzRGF0YS5iaW5kKHRoaXMsIGZhbHNlKSk7CgogICAgICAgICAgICAgICAgLy9JZiB0aGUgdXJsIGNvbnRhaW5zIGEgaGFzaCwgYW5kIGZhY2V0IG5hbWUgY29udHJvbCBpcyBjbGlja2VkLCB0aGVuIHdlIGhhdmUgdG8gbGlzdGVuIGZvciBwYXJ0aWFsIGZpbHRlcmluZwogICAgICAgICAgICAgICAgWEEuY29tcG9uZW50LnNlYXJjaC52ZW50Lm9uKCJmYWNldC1kYXRhLXBhcnRpYWwtZmlsdGVyZWQiLCB0aGlzLnByb2Nlc3NEYXRhLmJpbmQodGhpcywgdHJ1ZSkpOwoKICAgICAgICAgICAgICAgIC8vRXZlbnQgYWZ0ZXIgY2hhbmdlIG9mIGhhc2gKICAgICAgICAgICAgICAgIFhBLmNvbXBvbmVudC5zZWFyY2gudmVudC5vbigiaGFzaENoYW5nZWQiLCB0aGlzLnVwZGF0ZUNvbXBvbmVudC5iaW5kKHRoaXMpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFRvZ2dsZSB2YWx1ZSBvZiBibG9ja05leHRSZXF1ZXN0IHZhcmlhYmxlCiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93bk1vZGVsCiAgICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93bk1vZGVsI3RvZ2dsZUJsb2NrUmVxdWVzdHMKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHRvZ2dsZUJsb2NrUmVxdWVzdHM6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuZ2V0KCJibG9ja05leHRSZXF1ZXN0Iik7CiAgICAgICAgICAgICAgICB0aGlzLnNldCh0aGlzLmdldCgiYmxvY2tOZXh0UmVxdWVzdCIpLCAhc3RhdGUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogUHJvY2Vzc2VzIGRhdGEgdGhhdCBjb21lcyBhcyBwYXJhbWV0ZXIgdXBkYXRlCiAgICAgICAgICAgICAqIG1vZGVsIGFuZCBzb3J0cyBmYWNldHMKICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgRGF0YSBmcm9tIHNlcnZlciB3aXRoIGZhY2V0IHZhbHVlcwogICAgICAgICAgICAgKiBAbWVtYmVyb2YgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25Nb2RlbAogICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25Nb2RlbCNwcm9jZXNzRGF0YQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZ1bmN0aW9uIChwYXJ0aWFsRmlsdGVyaW5nLCBkYXRhKSB7CiAgICAgICAgICAgICAgICB2YXIgaW5zdCA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgaGFzaE9iaiA9IHF1ZXJ5TW9kZWwucGFyc2VIYXNoUGFyYW1ldGVycyh3aW5kb3cubG9jYXRpb24uaGFzaCksCiAgICAgICAgICAgICAgICAgICAgc2lnID0gaW5zdC5nZXQoInNpZyIpLAogICAgICAgICAgICAgICAgICAgIGRhdGFQcm9wZXJ0aWVzID0gdGhpcy5nZXQoImRhdGFQcm9wZXJ0aWVzIiksCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0c1NpZ25hdHVyZSA9IGRhdGFQcm9wZXJ0aWVzLnNlYXJjaFJlc3VsdHNTaWduYXR1cmUuc3BsaXQoJywnKSwKICAgICAgICAgICAgICAgICAgICBzb3J0T3JkZXIgPSBkYXRhUHJvcGVydGllcy5zb3J0T3JkZXIsCiAgICAgICAgICAgICAgICAgICAgZmFjZXQgPSBkYXRhUHJvcGVydGllcy5mLAogICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVkLAogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWREYXRhLAogICAgICAgICAgICAgICAgICAgIGZhY2V0SXRlbSwKICAgICAgICAgICAgICAgICAgICBmYWNlZERhdGEsCiAgICAgICAgICAgICAgICAgICAgaSwgajsKCiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgc2VhcmNoUmVzdWx0c1NpZ25hdHVyZS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLkZhY2V0cy5sZW5ndGggPiAwICYmIChkYXRhLlNpZ25hdHVyZSA9PT0gc2VhcmNoUmVzdWx0c1NpZ25hdHVyZVtqXSkgfHwgZGF0YS5TaWduYXR1cmUgPT09ICIiIHx8IGRhdGEuU2lnbmF0dXJlID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2VkRGF0YSA9IF8uZmluZChkYXRhLkZhY2V0cywgZnVuY3Rpb24gKGYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmLktleS50b0xvd2VyQ2FzZSgpID09PSBmYWNldC50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWNlZERhdGEgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2lnLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWpRdWVyeS5pc0VtcHR5T2JqZWN0KF8ucGljayhoYXNoT2JqLCBzaWdbaV0pKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNoT2JqW3NpZ1tpXV0gIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0SXRlbSA9IF8ud2hlcmUoZmFjZWREYXRhLlZhbHVlcywgeyBOYW1lOiBoYXNoT2JqW3NpZ1tpXV0gfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWNldEl0ZW0ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldEl0ZW0gPSBfLndoZXJlKGZhY2VkRGF0YS5WYWx1ZXMsIHsgTmFtZTogIiIgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhY2V0SXRlbS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldEl0ZW1bMF0uU2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5vcHRpb25TZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hSZXN1bHRzU2lnbmF0dXJlLmxlbmd0aCA+IDEgJiYgc2VhcmNoUmVzdWx0c1NpZ25hdHVyZS5pbmRleE9mKGRhdGEuU2lnbmF0dXJlKSAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90d28gc2lnbmF0dXJlcywgdHdvIHNlYXJjaCByZXN1bHRzIGNvbXBvbmVudHMgb24gdGhlIHBhZ2UsIGFnZ3JlZ2F0aW5nIHJlc3VsdHMgZnJvbSB0d28gc2VhcmNoIHJlc3VsdHMgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRGF0YSA9IGluc3QuZ2V0KCJyZXN1bHREYXRhIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplZCA9IGluc3QuZ2V0KCdpbml0aWFsaXplZF8nICsgc2lnW2pdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnRpYWxGaWx0ZXJpbmcgfHwgKHBhcnRpYWxGaWx0ZXJpbmcgJiYgIWluaXRpYWxpemVkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbmV3SXRlbSBpbiBmYWNlZERhdGEuVmFsdWVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZXhpc3RpbmdJdGVtIGluIHVwZGF0ZWREYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZWREYXRhLlZhbHVlc1tuZXdJdGVtXS5OYW1lID09IHVwZGF0ZWREYXRhW2V4aXN0aW5nSXRlbV0uTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWREYXRhW2V4aXN0aW5nSXRlbV0uQ291bnQgKz0gZmFjZWREYXRhLlZhbHVlc1tuZXdJdGVtXS5Db3VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1cGRhdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRGF0YVtPYmplY3Qua2V5cyh1cGRhdGVkRGF0YSkubGVuZ3RoXSA9IGZhY2VkRGF0YS5WYWx1ZXNbbmV3SXRlbV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zYXZlIHRoYXQgZGF0YSBmb3IgdGhpcyBzaWduYXR1cmUgaGFzIGJlZW4gaW5pdGlhbGl6ZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LnNldCgnaW5pdGlhbGl6ZWRfJyArIHNpZ1tqXSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRGF0YSA9IGluc3Qub2JqZWN0VG9BcnJheSh1cGRhdGVkRGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRGYWNldEFycmF5KHNvcnRPcmRlciwgdXBkYXRlZERhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LnNldCh7IHJlc3VsdERhdGE6IHVwZGF0ZWREYXRhIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRGYWNldEFycmF5KHNvcnRPcmRlciwgZmFjZWREYXRhLlZhbHVlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LnNldCh7IHJlc3VsdERhdGE6IGZhY2VkRGF0YS5WYWx1ZXMgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBTZXRzIG9wdGlvbiBzZWxlY3RlZCB2YWx1ZSB0byBtb2RlbCBiYXNlZCBvbiBoYXNoCiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoIEhhc2ggc3RvcmVkIGFzIGFuIG9iamVjdAogICAgICAgICAgICAgKiBAbWVtYmVyb2YgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25Nb2RlbAogICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25Nb2RlbCN1cGRhdGVDb21wb25lbnQKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudDogZnVuY3Rpb24gKGhhc2gpIHsKICAgICAgICAgICAgICAgIHZhciBzaWcgPSB0aGlzLmdldCgic2lnIiksIGksIGZhY2V0UGFydDsKCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2lnLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZmFjZXRQYXJ0ID0gc2lnW2ldLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc2guaGFzT3duUHJvcGVydHkoZmFjZXRQYXJ0KSAmJiBoYXNoW2ZhY2V0UGFydF0gIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KHsgb3B0aW9uU2VsZWN0ZWQ6IHRydWUgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQoeyBvcHRpb25TZWxlY3RlZDogZmFsc2UgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAvKioKICAgICogQG5hbWUgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3CiAgICAqIEBjb25zdHJ1Y3RvcgogICAgKiBAYXVnbWVudHMgQmFja2JvbmUuVmlldwogICAgKi8KICAgIHZhciBGYWNldERyb3Bkb3duVmlldyA9IFhBLmNvbXBvbmVudC5zZWFyY2guYmFzZVZpZXcuZXh0ZW5kKAogICAgICAgIC8qKiBAbGVuZHMgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3LnByb3RvdHlwZSAqKi8KCiAgICAgICAgewogICAgICAgICAgICAvKioKICAgICAgICAgICAgKiBJbml0aWFsbHkgc2V0cyBkYXRhIHRvIG1vZGVsIGFuZCB3YXRjaGVzIGV2ZW50cyBvbiB3aGljaAogICAgICAgICAgICAqIHZpZXcgc2hvdWxkIGJlIHVwZGF0ZWQKICAgICAgICAgICAgKiBAbGlzdGVucyBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93bk1vZGVsfmV2ZW50OmNoYW5nZQogICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93blZpZXcKICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3I2luaXRpYWxpemUKICAgICAgICAgICAgKi8KICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGRhdGFQcm9wZXJ0aWVzID0gdGhpcy4kZWwuZGF0YSgpOwogICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gZGF0YVByb3BlcnRpZXMucHJvcGVydGllczsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlbCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuc2V0KHsgZGF0YVByb3BlcnRpZXM6IHRoaXMucHJvcGVydGllcyB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNldCgic2lnIiwgdGhpcy50cmFuc2xhdGVTaWduYXR1cmVzKHRoaXMucHJvcGVydGllcy5zZWFyY2hSZXN1bHRzU2lnbmF0dXJlLCB0aGlzLnByb3BlcnRpZXMuZikpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMubW9kZWwub24oImNoYW5nZSIsIHRoaXMucmVuZGVyLCB0aGlzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIGxpc3Qgb2YgZXZlbnRzIGZvciBCYWNrYm9uZSBWaWV3CiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldwogICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93blZpZXcjZXZlbnRzCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBldmVudHM6IHsKICAgICAgICAgICAgICAgICJjaGFuZ2UgLmZhY2V0LWRyb3Bkb3duLXNlbGVjdCI6ICJ1cGRhdGVGYWNldCIsCiAgICAgICAgICAgICAgICAiY2xpY2sgLmJvdHRvbS1yZW1vdmUtZmlsdGVyLCAuY2xlYXItZmlsdGVyIjogImNsZWFyRmlsdGVyIgogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ2FsY3VsYXRlcyB2YWx1ZSBvZiBvcHRpb25TZWxlY3RlZCB2YWx1ZSBpbiBtb2RlbCBhbmQgY2FsbHMKICAgICAgICAgICAgICogWyJ1cGRhdGVTaWduYXR1cmVzSGFzaCJde0BsaW5rIG1vZHVsZSBkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldyN1cGRhdGVTaWduYXR1cmVzSGFzaH0KICAgICAgICAgICAgICogaW5zaWRlIG9mIFsidXBkYXRlSGFzaCJde0BsaW5rIG1vZHVsZTpzZWFyY2hRdWVyeS51cGRhdGVIYXNofQogICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93blZpZXcKICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3I3VwZGF0ZUZhY2V0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICB1cGRhdGVGYWNldDogZnVuY3Rpb24gKHBhcmFtKSB7CiAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdGVkT3B0aW9uID0gdGhpcy4kZWwuZmluZCgiLmZhY2V0LWRyb3Bkb3duLXNlbGVjdCIpLmZpbmQoIm9wdGlvbjpzZWxlY3RlZCIpLAogICAgICAgICAgICAgICAgICAgIHNlYXJjaE1vZGVscyA9IHR5cGVvZiBYQS5jb21wb25lbnQuc2VhcmNoICE9PSAidW5kZWZpbmVkIiA/IFhBLmNvbXBvbmVudC5zZWFyY2gucmVzdWx0cy5zZWFyY2hSZXN1bHRNb2RlbHMgOiBbXSwKICAgICAgICAgICAgICAgICAgICBmYWNldE5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQoJHNlbGVjdGVkT3B0aW9uLmRhdGEoImZhY2V0bmFtZSIpKSwKICAgICAgICAgICAgICAgICAgICBzaWcgPSB0aGlzLm1vZGVsLmdldCgic2lnIiksCiAgICAgICAgICAgICAgICAgICAgaTsKCiAgICAgICAgICAgICAgICBpZiAoZmFjZXROYW1lID09PSAiIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuc2V0KHsgb3B0aW9uU2VsZWN0ZWQ6IGZhbHNlIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNldCh7IG9wdGlvblNlbGVjdGVkOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vcmVzZXQgbG9hZCBtb3JlIGFmdGVyIGZhY2V0IGNoYW5nZQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlYXJjaE1vZGVscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hNb2RlbHNbaV0uZ2V0KCJkYXRhUHJvcGVydGllcyIpLnNpZyA9PT0gdGhpcy5tb2RlbC5nZXQoImRhdGFQcm9wZXJ0aWVzIikuc2VhcmNoUmVzdWx0c1NpZ25hdHVyZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hNb2RlbHNbaV0uc2V0KCJsb2FkTW9yZU9mZnNldCIsIDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBxdWVyeU1vZGVsLnVwZGF0ZUhhc2godGhpcy51cGRhdGVTaWduYXR1cmVzSGFzaChzaWcsIGZhY2V0TmFtZSwge30pKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICogUmVuZGVycyB2aWV3CiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldwogICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93blZpZXcjcmVuZGVyCiAgICAgICAgICAgICovCiAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGluc3QgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgIHJlc3VsdERhdGEgPSBpbnN0Lm1vZGVsLmdldCgicmVzdWx0RGF0YSIpLAogICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duID0gdGhpcy4kZWwuZmluZCgiLmZhY2V0LWRyb3Bkb3duLXNlbGVjdCIpLAogICAgICAgICAgICAgICAgICAgIGVtcHR5VmFsdWVUZXh0ID0gaW5zdC5tb2RlbC5nZXQoJ2RhdGFQcm9wZXJ0aWVzJykuZW1wdHlWYWx1ZVRleHQsCiAgICAgICAgICAgICAgICAgICAgZmFjZXRDbG9zZSA9IHRoaXMuJGVsLmZpbmQoIi5mYWNldC1oZWFkaW5nID4gc3BhbiIpLAogICAgICAgICAgICAgICAgICAgIG5vdFNlbGVjdGVkT3B0aW9uID0gZHJvcGRvd24uZmluZCgib3B0aW9uOmZpcnN0IiksCiAgICAgICAgICAgICAgICAgICAgbm90U2VsZWN0ZWRPcHRpb25FbnRyeSA9ICQoIjxvcHRpb24gLz4iKSwKICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUoaW5zdC5tb2RlbC5nZXQoInRlbXBsYXRlIikpLAogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVzdWx0ID0gdGVtcGxhdGUoeyByZXN1bHRzOiByZXN1bHREYXRhLCBlbXB0eVRleHQ6IGVtcHR5VmFsdWVUZXh0LCBzYW5pdGl6ZTogWEEuc2VjdXJpdHkuc2FuaXRpemUgfSk7CgogICAgICAgICAgICAgICAgdGhpcy5tYW5hZ2VWaXNpYmlsaXR5QnlEYXRhKHRoaXMuJGVsLCByZXN1bHREYXRhKQogICAgICAgICAgICAgICAgbm90U2VsZWN0ZWRPcHRpb25FbnRyeS50ZXh0KG5vdFNlbGVjdGVkT3B0aW9uLnRleHQoKSk7CiAgICAgICAgICAgICAgICBub3RTZWxlY3RlZE9wdGlvbkVudHJ5LmRhdGEoImZhY2V0bmFtZSIsICIiKTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlbC5nZXQoIm9wdGlvblNlbGVjdGVkIikpIHsKICAgICAgICAgICAgICAgICAgICBmYWNldENsb3NlLmFkZENsYXNzKCJoYXMtYWN0aXZlLWZhY2V0Iik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdFNlbGVjdGVkT3B0aW9uLmRhdGEoImZhY2V0bmFtZSIpID09PSAiIikgewogICAgICAgICAgICAgICAgICAgIGZhY2V0Q2xvc2UucmVtb3ZlQ2xhc3MoImhhcy1hY3RpdmUtZmFjZXQiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkcm9wZG93bi5lbXB0eSgpLmFwcGVuZChub3RTZWxlY3RlZE9wdGlvbkVudHJ5KS5hcHBlbmQodGVtcGxhdGVSZXN1bHQpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgKiBDbGVhcnMgc2VsZWN0ZWQgZmlsdGVycyBhbmQgdXBkYXRlcyBoYXNoIGJ5IGNhbGxpbmcKICAgICAgICAgICAgKiBbInVwZGF0ZUhhc2giXXtAbGluayBtb2R1bGU6c2VhcmNoUXVlcnkudXBkYXRlSGFzaH0KICAgICAgICAgICAgKiBAbWVtYmVyb2YgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3CiAgICAgICAgICAgICogQGFsaWFzIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldyNjbGVhckZpbHRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY2xlYXJGaWx0ZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBkcm9wZG93biA9IHRoaXMuJGVsLmZpbmQoIi5mYWNldC1kcm9wZG93bi1zZWxlY3QiKSwKICAgICAgICAgICAgICAgICAgICBmYWNldENsb3NlID0gdGhpcy4kZWwuZmluZCgiLmZhY2V0LWhlYWRpbmcgPiBzcGFuIiksCiAgICAgICAgICAgICAgICAgICAgc2lnID0gdGhpcy5tb2RlbC5nZXQoInNpZyIpOwoKICAgICAgICAgICAgICAgIHF1ZXJ5TW9kZWwudXBkYXRlSGFzaCh0aGlzLnVwZGF0ZVNpZ25hdHVyZXNIYXNoKHNpZywgIiIsIHt9KSk7CiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNldCh7IG9wdGlvblNlbGVjdGVkOiBmYWxzZSB9KTsKICAgICAgICAgICAgICAgIGZhY2V0Q2xvc2UucmVtb3ZlQ2xhc3MoImhhcy1hY3RpdmUtZmFjZXQiKTsKICAgICAgICAgICAgICAgIGRyb3Bkb3duLnZhbChkcm9wZG93bi5maW5kKCJvcHRpb246Zmlyc3QiKS52YWwoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIC8qKgogICAgKiBGb3IgZWFjaCBzZWFyY2ggZHJvcGRvd24gY29tcG9uZW50IG9uIGEgcGFnZSBjcmVhdGVzIGluc3RhbmNlIG9mCiAgICAqIFsiRmFjZXREcm9wZG93bk1vZGVsIl17QGxpbmsgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25Nb2RlbH0gYW5kCiAgICAqIFsiRmFjZXREcm9wZG93blZpZXciXXtAbGluayBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93blZpZXd9CiAgICAqIEBtZW1iZXJPZiBtb2R1bGU6ZHJvcGRvd24KICAgICogQGFsaWFzIG1vZHVsZTpkcm9wZG93bi5pbml0CiAgICAqLwoKICAgIGFwaS5pbml0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICgkKCJib2R5IikuaGFzQ2xhc3MoIm9uLXBhZ2UtZWRpdG9yIikpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcXVlcnlNb2RlbCA9IFhBLmNvbXBvbmVudC5zZWFyY2gucXVlcnk7CiAgICAgICAgdXJsSGVscGVyTW9kZWwgPSBYQS5jb21wb25lbnQuc2VhcmNoLnVybDsKCiAgICAgICAgdmFyIGZhY2V0RHJvcGRvd25MaXN0ID0gJCgiLmZhY2V0LWRyb3Bkb3duOm5vdCguaW5pdGlhbGl6ZWQpIik7CgogICAgICAgIF8uZWFjaChmYWNldERyb3Bkb3duTGlzdCwgZnVuY3Rpb24gKGVsZW0pIHsKICAgICAgICAgICAgdmFyICRlbCA9ICQoZWxlbSksCiAgICAgICAgICAgICAgICB2aWV3ID0gbmV3IEZhY2V0RHJvcGRvd25WaWV3KHsgZWw6ICRlbCwgbW9kZWw6IG5ldyBGYWNldERyb3Bkb3duTW9kZWwoKSB9KTsKCiAgICAgICAgICAgICRlbC5hZGRDbGFzcygiaW5pdGlhbGl6ZWQiKTsKICAgICAgICB9KTsKICAgIH07CiAgICAvKioKICAgICoKICAgICogQG1lbWJlck9mIG1vZHVsZTpkcm9wZG93bgogICAgKiBAYWxpYXMgbW9kdWxlOmRyb3Bkb3duLmdldEZhY2V0RGF0YVJlcXVlc3RJbmZvCiAgICAqIEByZXR1cm5zIHtBcnJheTxGYWNldERhdGFSZXF1ZXN0SW5mbz59IGZhY2V0IGRhdGEgbmVlZGVkIGZvciByZXF1ZXN0CiAgICAqLwogICAgYXBpLmdldEZhY2V0RGF0YVJlcXVlc3RJbmZvID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBmYWNldERyb3Bkb3duTGlzdCA9ICQoIi5mYWNldC1kcm9wZG93biIpLAogICAgICAgICAgICByZXN1bHQgPSBbXTsKCiAgICAgICAgXy5lYWNoKGZhY2V0RHJvcGRvd25MaXN0LCBmdW5jdGlvbiAoZWxlbSkgewogICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9ICQoZWxlbSkuZGF0YSgpLnByb3BlcnRpZXMsCiAgICAgICAgICAgICAgICBzaWduYXR1cmVzID0gcHJvcGVydGllcy5zZWFyY2hSZXN1bHRzU2lnbmF0dXJlLnNwbGl0KCcsJyksCiAgICAgICAgICAgICAgICBpOwoKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNpZ25hdHVyZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZXNbaV0gPT09IG51bGwgPyAiIiA6IHNpZ25hdHVyZXNbaV0sCiAgICAgICAgICAgICAgICAgICAgZmFjZXROYW1lOiBwcm9wZXJ0aWVzLmYsCiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IHByb3BlcnRpZXMuZW5kcG9pbnQsCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyV2l0aG91dE1lOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfTsKCiAgICByZXR1cm4gYXBpOwoKfShqUXVlcnksIGRvY3VtZW50KSk7CgpYQS5yZWdpc3RlcigiZmFjZXREcm9wZG93biIsIFhBLmNvbXBvbmVudC5zZWFyY2guZmFjZXQuZHJvcGRvd24pOw==
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 15349
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "ba3f86a2-4a1c-4d78-b63d-91c2779c1b5e"
  Hint: __Sortorder
  Value: 600
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160728T134136Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "a32a1987-3c30-4230-a24f-0d9c23805f18"
