---
ID: "bfac3be8-5eb1-4a23-9ed8-3563fa3240bb"
Parent: "02f3f9cf-6e2b-49c8-be56-9701c0316569"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Base Themes/Components Theme/Scripts/component-video-playlist"
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/BFAC3BE85EB14A239ED83563FA3240BB.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "bfac3be8-5eb1-4a23-9ed8-3563fa3240bb"
  Value: LyogZ2xvYmFsIG1lanM6ZmFsc2UgKi8NCi8qKg0KICogQ29tcG9uZW50IFBsYXlsaXN0DQogKiBAbW9kdWxlIFBsYXlsaXN0DQogKiBAcGFyYW0gIHtqUXVlcnl9ICQgSW5zdGFuY2Ugb2YgalF1ZXJ5DQogKiBAcmV0dXJuIHtPYmplY3R9IExpc3Qgb2YgUGxheWxpc3QgY29tcG9uZW50IG1ldGhvZHMNCiAqLw0KWEEuY29tcG9uZW50LnBsYXlsaXN0ID0gKGZ1bmN0aW9uICgkKSB7DQogICAgLyoqDQogICAgICogVGhpcyBvYmplY3Qgc3RvcmVzIGFsbCBwdWJsaWMgYXBpIG1ldGhvZHMNCiAgICAgKiBAdHlwZSB7T2JqZWN0LjxNZXRob2RzPn0NCiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlBsYXlsaXN0DQogICAgICogKi8NCiAgICB2YXIgYXBpID0ge307DQogICAgLyoqDQogICAgICogVGhpcyBjbGFzcyBpcyB1c2VkIGJ5IFtQbGF5bGlzdF17QGxpbmsgbW9kdWxlOlBsYXlsaXN0fSBtb2R1bGUNCiAgICAgKiBAY2xhc3MgUGxheWxpc3QNCiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlBsYXlsaXN0DQogICAgICogQHBhcmFtIHtqUXVlcnl9IHBsYXlsaXN0IFJvb3QgRE9NIGVsZW1lbnQgb2YgcGxheWxpc3QgY29tcG9uZW50IHdyYXBwZWQgYnkgalF1ZXJ5DQogICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgUHJvcGVydGllcyBzZXQgaW4gZGF0YSBhdHRyaWJ1dGUNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBQbGF5bGlzdChwbGF5bGlzdCwgcHJvcGVydGllcykgew0KICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzOw0KICAgICAgICB0aGlzLnBsYXlsaXN0ID0gcGxheWxpc3Q7DQogICAgICAgIHRoaXMuYWN0aXZlVmlkZW8gPSAwOw0KICAgICAgICB0aGlzLnBsYXlsaXN0SXRlbXMgPSAwOw0KICAgIH0NCiAgICAvKioNCiAgICAgKiBDcmVhdGVzIG5ldyBzb3VyY2UgZWxlbWVudCwgc2V0cyB1cCBpdCB3aXRoIHR5cGUgJiBzcmMuIENyZWF0ZWQgZWxlbWVudA0KICAgICAqIGFwcGVuZCB0byBWaWRlbyBjb250YWluZXIgKHRha2UgaXQgZnJvbSB2aWRlb0NvbnRhaW5lciBwYXJhbWV0ZXIpDQogICAgICogQG1ldGhvZA0KICAgICAqIEBhbGlhcyBjcmVhdGVOZXdTb3VyY2VzDQogICAgICogQG1lbWJlck9mIG1vZHVsZTpQbGF5bGlzdC5QbGF5bGlzdA0KICAgICAqIEBwYXJhbSB7JE9yZGVyZWRMaXN0fSBzb3VyY2UgdGFrZXMgZnJvbSBwcm9wZXJ0aWVzLnNvdXJjZXNbaXRlbUluZGV4XS5zcmMgLSANCiAgICAgKiBzb3VyY2Ugb2YgcGxheWxpc3QgZWxlbWVudA0KICAgICAqIEBwYXJhbSB7JE9yZGVyZWRMaXN0fSB2aWRlb0NvbnRhaW5lciBjb250YWluZXIgd2hlcmUgc291cmNlIHNob3VsZCBiZSBhZGRlZA0KICAgICAqLw0KICAgIFBsYXlsaXN0LnByb3RvdHlwZS5jcmVhdGVOZXdTb3VyY2VzID0gZnVuY3Rpb24gKHNvdXJjZSwgdmlkZW9Db250YWluZXIpIHsNCiAgICAgICAgdmFyIG5ld1NvdXJjZTsNCg0KICAgICAgICB2YXIgc291cmNlQnVpbGRlciA9IGZ1bmN0aW9uIChwYXRoKSB7DQogICAgICAgICAgICB2YXIgbmV3U291cmNlID0gJCgiPHNvdXJjZT4iKSwNCiAgICAgICAgICAgICAgICB0eXBlOw0KDQogICAgICAgICAgICBpZiAocGF0aC5tYXRjaCgvXC4obXA0KSQvKSkgew0KICAgICAgICAgICAgICAgIHR5cGUgPSAidmlkZW8vbXA0IjsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocGF0aC5tYXRjaCgvXC4od2VibSkkLykpIHsNCiAgICAgICAgICAgICAgICB0eXBlID0gInZpZGVvL3dlYm0iOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChwYXRoLm1hdGNoKC9cLihvZ3YpJC8pKSB7DQogICAgICAgICAgICAgICAgdHlwZSA9ICJ2aWRlby9vZ2ciOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0eXBlID0gInZpZGVvL3lvdXR1YmUiOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBuZXdTb3VyY2UuYXR0cih7DQogICAgICAgICAgICAgICAgdHlwZTogdHlwZSwNCiAgICAgICAgICAgICAgICBzcmM6IHBhdGgNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICByZXR1cm4gbmV3U291cmNlOw0KICAgICAgICB9Ow0KDQogICAgICAgIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBBcnJheSkgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBuZXdTb3VyY2UgPSBzb3VyY2VCdWlsZGVyKHNvdXJjZVtpXSk7DQogICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIuZmluZCgidmlkZW8iKS5hcHBlbmQobmV3U291cmNlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIG5ld1NvdXJjZSA9IHNvdXJjZUJ1aWxkZXIoc291cmNlKTsNCiAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLmZpbmQoInZpZGVvIikuYXBwZW5kKG5ld1NvdXJjZSk7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIC8qKg0KICAgICAqIFJlcGxhY2VzIHNvdXJjZSBvZiBlYWNoIHZpZGVvIGVsZW1lbnQgdW5kZXIgcGxheSBsaXN0IGNvbXBvbmVudC4NCiAgICAgKiBBZnRlciByZXBsYWNpbmcgaXQgcmUtaW5pdGlhbGl6ZXMgdmlkZW8gY29tcG9uZW50IGJ5IGNhbGxpbmcgDQogICAgICogW1hBLmNvbXBvbmVudC52aWRlby5pbml0VmlkZW9Gcm9tUGxheWxpc3Rde0BsaW5rIG1vZHVsZTpWaWRlby5pbml0VmlkZW9Gcm9tUGxheWxpc3R9DQogICAgICogQG5hbWUgcmVwbGFjZVNvdXJjZQ0KICAgICAqIEBmdW5jdGlvbg0KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpdGVtSW5kZXggcG9zaXRpb24gb2YgYWN0aXZlIHZpZGVvIGluIHZpZGVvIGxpc3QNCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxvYWRGcm9tRXZlbnQNCiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlBsYXlsaXN0LlBsYXlsaXN0DQogICAgICovDQoNCiAgICBQbGF5bGlzdC5wcm90b3R5cGUucmVwbGFjZVNvdXJjZSA9IGZ1bmN0aW9uIChpdGVtSW5kZXgsIGxvYWRGcm9tRXZlbnQpIHsNCiAgICAgICAgdmFyIGluc3QgPSB0aGlzLA0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIsDQogICAgICAgICAgICB2aWRlb0Nsb25lLA0KICAgICAgICAgICAgbmV3U3JjID0gaW5zdC5wcm9wZXJ0aWVzLnNvdXJjZXNbaXRlbUluZGV4XS5zcmMsDQogICAgICAgICAgICBzb3VyY2VzLA0KICAgICAgICAgICAgdmlkZW9JZCwNCiAgICAgICAgICAgIHZpZGVvQ29udGFpbmVySGVpZ2h0ID0gMDsNCg0KICAgICAgICAkKGluc3QucHJvcGVydGllcy5wbGF5bGlzdElkKS5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyID0gJCh0aGlzKTsNCiAgICAgICAgICAgIHZpZGVvSWQgPSBpbnN0LnByb3BlcnRpZXMucGxheWxpc3RJZDsNCg0KICAgICAgICAgICAgaWYgKHZpZGVvQ29udGFpbmVyLmlzKHZpZGVvSWQpICYmIG5ld1NyYy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5hZGRDbGFzcygic2hvdyIpOw0KDQogICAgICAgICAgICAgICAgc291cmNlcyA9IHZpZGVvQ29udGFpbmVyLmZpbmQoInNvdXJjZSIpOw0KICAgICAgICAgICAgICAgIHNvdXJjZXMucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgaW5zdC5jcmVhdGVOZXdTb3VyY2VzKG5ld1NyYywgdmlkZW9Db250YWluZXIpOw0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyDQogICAgICAgICAgICAgICAgICAgIC5maW5kKCJ2aWRlbyIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogIiINCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLnNob3coKTsNCg0KICAgICAgICAgICAgICAgIHZhciBhdXRvcGxheVZpZGVvID0gZmFsc2U7DQogICAgICAgICAgICAgICAgaWYgKGxvYWRGcm9tRXZlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3QucHJvcGVydGllcy5hdXRvUGxheVNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhdXRvcGxheVZpZGVvID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbnN0LnByb3BlcnRpZXMuYXV0b1BsYXkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5VmlkZW8gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGF1dG9wbGF5VmlkZW8pIHsNCiAgICAgICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIuZmluZCgidmlkZW8iKS5hdHRyKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiAiIg0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2aWRlb0Nsb25lID0gdmlkZW9Db250YWluZXIuZmluZCgidmlkZW8iKS5jbG9uZSgpOw0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVySGVpZ2h0ID0gdmlkZW9Db250YWluZXIuaGVpZ2h0KCk7DQogICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY3NzKHsNCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB2aWRlb0NvbnRhaW5lckhlaWdodA0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgdmFyIGlkID0gdmlkZW9Db250YWluZXIuZmluZCgiLm1lanMtY29udGFpbmVyIikuYXR0cigiaWQiKTsNCiAgICAgICAgICAgICAgICBpZiAoaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgJCgiIyIgKyBpZCkucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZWpzLnBsYXllcnNbaWRdOw0KICAgICAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lcg0KICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoIi5jb21wb25lbnQtY29udGVudCIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHZpZGVvQ2xvbmUpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIFhBLmNvbXBvbmVudC52aWRlby5pbml0VmlkZW9Gcm9tUGxheWxpc3QoDQogICAgICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLA0KICAgICAgICAgICAgICAgICAgICBpbnN0LnBsYXlsaXN0DQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5jc3Moew0KICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICJhdXRvIg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgLyoqDQogICAgICogSW5pdGlhbGl6ZXMgdmlkZW9zIHVuZGVyIGNvbXBvbmVudC4gT24gY2FsbCBhbmQgb24NCiAgICAgKiBbY2hhbmdlLXZpZGVvXXtAbGluayBtb2R1bGU6UGxheWxpc3QuUGxheWxpc3QjY2hhbmdlLXZpZGVvfSBldmVudA0KICAgICAqIGNhbGxzIFtyZXBsYWNlU291cmNlXXtAbGluayBtb2R1bGU6UGxheWxpc3QuUGxheWxpc3QucmVwbGFjZVNvdXJjZX0NCiAgICAgKiBAbmFtZSBsb2FkUGxheWxpc3RWaWRlbw0KICAgICAqIEBmdW5jdGlvbg0KICAgICAqIEBsaXN0ZW5lcnMgbW9kdWxlOlBsYXlsaXN0LlBsYXlsaXN0I2NoYW5nZS12aWRlbw0KICAgICAqIEBtZW1iZXJPZiBtb2R1bGU6UGxheWxpc3QuUGxheWxpc3QNCiAgICAgKi8NCg0KICAgIFBsYXlsaXN0LnByb3RvdHlwZS5sb2FkUGxheWxpc3RWaWRlbyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIGluc3QgPSB0aGlzLA0KICAgICAgICAgICAgcGxheWxpc3RJdGVtcyA9ICQoaW5zdC5wbGF5bGlzdCkuZmluZCgiLnBsYXlsaXN0LWl0ZW0iKSwNCiAgICAgICAgICAgIGFjdGl2ZUxpc3RJdGVtOw0KDQogICAgICAgIGluc3QucGxheWxpc3RJdGVtcyA9IHBsYXlsaXN0SXRlbXMubGVuZ3RoOw0KICAgICAgICB2YXIgbG9hZFZpZGVvRnJvbVBsYXlsaXN0ID0gZnVuY3Rpb24gKGxvYWRGcm9tRXZlbnQpIHsNCiAgICAgICAgICAgIGluc3QucmVwbGFjZVNvdXJjZShpbnN0LmFjdGl2ZVZpZGVvLCBsb2FkRnJvbUV2ZW50KTsNCiAgICAgICAgICAgIGFjdGl2ZUxpc3RJdGVtID0gcGxheWxpc3RJdGVtcy5lcShpbnN0LmFjdGl2ZVZpZGVvKTsNCiAgICAgICAgICAgIGFjdGl2ZUxpc3RJdGVtLmFkZENsYXNzKCJhY3RpdmUiKTsNCiAgICAgICAgICAgIGFjdGl2ZUxpc3RJdGVtLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGxvYWRWaWRlb0Zyb21QbGF5bGlzdCgpOw0KICAgICAgICAkKGluc3QucGxheWxpc3QpLm9uKCJjaGFuZ2UtdmlkZW8iLCBmdW5jdGlvbiAoZXZlbnQsIHByb3BlcnRpZXMpIHsNCiAgICAgICAgICAgIHZhciBsb2FkTmV3VmlkZW8gPSBmYWxzZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpIHsNCiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eSgiYmFjayIpKSB7DQogICAgICAgICAgICAgICAgICAgIGluc3QuYWN0aXZlVmlkZW8tLTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3QuYWN0aXZlVmlkZW8gPCAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpbnN0LmFjdGl2ZVZpZGVvID0gMDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWROZXdWaWRlbyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpbnN0LmFjdGl2ZVZpZGVvKys7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbnN0LmFjdGl2ZVZpZGVvID09PSBpbnN0LnBsYXlsaXN0SXRlbXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0LnByb3BlcnRpZXMucmVwZWF0QWZ0ZXJBbGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LmFjdGl2ZVZpZGVvID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkTmV3VmlkZW8gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LmFjdGl2ZVZpZGVvID0gaW5zdC5wbGF5bGlzdEl0ZW1zIC0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWROZXdWaWRlbyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmIChpbnN0LnByb3BlcnRpZXMucGxheU5leHQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3QuYWN0aXZlVmlkZW8gKyAxIDw9IGluc3QucGxheWxpc3RJdGVtcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5hY3RpdmVWaWRlbysrOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdC5hY3RpdmVWaWRlbyA9PT0gaW5zdC5wbGF5bGlzdEl0ZW1zKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5hY3RpdmVWaWRlbyA9IDA7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdC5wcm9wZXJ0aWVzLnJlcGVhdEFmdGVyQWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWROZXdWaWRlbyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LmFjdGlWaWRlby0tOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWROZXdWaWRlbyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChsb2FkTmV3VmlkZW8pIHsNCiAgICAgICAgICAgICAgICBsb2FkVmlkZW9Gcm9tUGxheWxpc3QodHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH07DQogICAgLyoqDQogICAgICogQXR0YWNoZXMgZXZlbnRzIHRvIHBsYXlsaXN0LXNlY3Rpb24gYW5kIG5hdmlnYXRpb24gaXRlbXMNCiAgICAgKiBAbmFtZSBhdHRhY2hFdmVudHMNCiAgICAgKiBAZnVuY3Rpb24NCiAgICAgKiBAZmlyZXMgbW9kdWxlOlBsYXlsaXN0LlBsYXlsaXN0I2NoYW5nZS12aWRlbw0KICAgICAqIEBtZW1iZXJPZiBtb2R1bGU6UGxheWxpc3QuUGxheWxpc3QNCiAgICAgKi8NCiAgICBQbGF5bGlzdC5wcm90b3R5cGUuYXR0YWNoRXZlbnRzID0gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgaW5zdCA9IHRoaXMsDQogICAgICAgICAgICBsaW5rID0gJChpbnN0LnBsYXlsaXN0KS5maW5kKCIucGxheWxpc3Qtc2VjdGlvbiIpLA0KICAgICAgICAgICAgbmF2SXRlbXMgPSAkKGluc3QucGxheWxpc3QpLmZpbmQoIi5wbGF5bGlzdC1uYXYgYSIpLA0KICAgICAgICAgICAgcGxheWxpc3RJdGVtOw0KICAgICAgICBsaW5rLm9uKCJjbGljayIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIGlmICghaW5zdC5sb2NrZWQpIHsNCiAgICAgICAgICAgICAgICBpbnN0LmxvY2tlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgcGxheWxpc3RJdGVtID0gJCh0aGlzKS5wYXJlbnRzKCIucGxheWxpc3QtaXRlbSIpOw0KICAgICAgICAgICAgICAgIHZhciBpdGVtSW5kZXggPSBwbGF5bGlzdEl0ZW0uaW5kZXgoKTsNCg0KICAgICAgICAgICAgICAgIGlmIChpdGVtSW5kZXggIT09IGluc3QuYWN0aXZlVmlkZW8pIHsNCiAgICAgICAgICAgICAgICAgICAgcGxheWxpc3RJdGVtLmFkZENsYXNzKCJhY3RpdmUiKTsNCiAgICAgICAgICAgICAgICAgICAgcGxheWxpc3RJdGVtLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpOw0KICAgICAgICAgICAgICAgICAgICBpbnN0LnJlcGxhY2VTb3VyY2UoaXRlbUluZGV4LCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgaW5zdC5hY3RpdmVWaWRlbyA9IGl0ZW1JbmRleDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy9DaGFuZ2UgdmlkZW8gc291cmNlIG5vdCBtb3JlIG9mdGVuDQogICAgICAgICAgICAgICAgLy90aGFuIG9uY2UgcGVyIHNlY29uZA0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICAgICAgaW5zdC5sb2NrZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9LDEwMDApOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0pOw0KDQogICAgICAgIG5hdkl0ZW1zLm9uKCJjbGljayIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0ge307DQoNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAkKHRoaXMpDQogICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKQ0KICAgICAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoInBsYXlsaXN0LXByZXYiKQ0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgcHJvcGVydGllcy5iYWNrID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICogQ2hhbmdlIHZpZGVvIGV2ZW50IGZpcmVzIHdoZW4gdXNlciBjbGlja3MNCiAgICAgICAgICAgICAqIGEgIi5wbGF5bGlzdC1uYXYgYSIgZWxlbWVudC4NCiAgICAgICAgICAgICAqDQogICAgICAgICAgICAgKiBAZXZlbnQgbW9kdWxlOlBsYXlsaXN0LlBsYXlsaXN0I2NoYW5nZS12aWRlbw0KICAgICAgICAgICAgICogQHR5cGUge29iamVjdH0NCiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gSW5kaWNhdGVzIHdoZXRoZXIgcGxheWxpc3QgaGFzIGJhY2sgYnV0dG9uDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICQoaW5zdC5wbGF5bGlzdCkudHJpZ2dlcigiY2hhbmdlLXZpZGVvIiwgcHJvcGVydGllcyk7DQogICAgICAgIH0pOw0KICAgIH07DQogICAgLyoqDQogICAgICogRm9yIGVhY2ggcGxheWxpc3QgY29tcG9uZW50IGNyZWF0ZXMgbmV3IGluc3RhbmNlIG9mDQogICAgICogWyJQbGF5bGlzdCJde0BsaW5rICBtb2R1bGU6UGxheWxpc3QuUGxheWxpc3R9IGFuZCBjYWxscw0KICAgICAqIFsibG9hZFBsYXlsaXN0VmlkZW8iXXtAbGluayAgbW9kdWxlOlBsYXlsaXN0LlBsYXlsaXN0LmxvYWRQbGF5bGlzdFZpZGVvfSwNCiAgICAgKiBbImF0dGFjaEV2ZW50cyJde0BsaW5rICBtb2R1bGU6UGxheWxpc3QuUGxheWxpc3QuYXR0YWNoRXZlbnRzfQ0KICAgICAqIG1ldGhvZHMNCiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlBsYXlsaXN0DQogICAgICogQG1ldGhvZA0KICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBjb21wb25lbnQgUm9vdCBET00gZWxlbWVudCBvZiBwbGF5bGlzdCBjb21wb25lbnQgd3JhcHBlZCBieSBqUXVlcnkNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcCBQcm9wZXJ0aWVzIHNldCBpbiBkYXRhIGF0dHJpYnV0ZQ0KICAgICAqICBvZiBwbGF5bGlzdCBjb21wb25lbnQNCiAgICAgKiBAYWxpYXMgbW9kdWxlOlBsYXlsaXN0LmluaXRJbnN0YW5jZQ0KICAgICAqLw0KICAgIGFwaS5pbml0SW5zdGFuY2UgPSBmdW5jdGlvbiAoY29tcG9uZW50LCBwcm9wKSB7DQogICAgICAgIHZhciBwbGF5bGlzdDsNCiAgICAgICAgJChwcm9wLnBsYXlsaXN0SWQpLmFkZENsYXNzKCJpbml0aWFsaXplZCIpOyAvL3ByZXZlbnRzIHZpZGVvIGluaXQgaW4gY29tcG9uZW50LXZpZGVvLmpzDQogICAgICAgIGlmIChwcm9wLnNvdXJjZXMubGVuZ3RoKSB7DQogICAgICAgICAgICBwbGF5bGlzdCA9IG5ldyBQbGF5bGlzdChjb21wb25lbnQsIHByb3ApOw0KICAgICAgICAgICAgcGxheWxpc3QubG9hZFBsYXlsaXN0VmlkZW8oKTsNCiAgICAgICAgICAgIHBsYXlsaXN0LmF0dGFjaEV2ZW50cygpOw0KICAgICAgICB9DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBGaW5kcyBhbGwgbm90IGluaXRpYWxpemVkIHlldA0KICAgICAqIFBsYXlsaXN0IGNvbXBvbmVudHMgYW5kIGluIGEgbG9vcCBmb3IgZWFjaCBvZiB0aGVtDQogICAgICogcnVuIFsiaW5pdEluc3RhbmNlIl17QGxpbmsgbW9kdWxlOlBsYXlsaXN0LmluaXRJbnN0YW5jZX0NCiAgICAgKiBtZXRob2QuDQogICAgICogQG1lbWJlck9mIG1vZHVsZTpQbGF5bGlzdA0KICAgICAqIEBhbGlhcyBtb2R1bGU6UGxheWxpc3QuaW5pdA0KICAgICAqLw0KICAgIGFwaS5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgcGxheWxpc3RzID0gJCgiLnBsYXlsaXN0LmNvbXBvbmVudDpub3QoLmluaXRpYWxpemVkKSIpLA0KICAgICAgICAgICAgcHJvcGVydGllczsNCg0KICAgICAgICBwbGF5bGlzdHMuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBwcm9wZXJ0aWVzID0gJCh0aGlzKS5kYXRhKCJwcm9wZXJ0aWVzIik7DQogICAgICAgICAgICBhcGkuaW5pdEluc3RhbmNlKHRoaXMsIHByb3BlcnRpZXMpOw0KICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygiaW5pdGlhbGl6ZWQiKTsNCiAgICAgICAgfSk7DQogICAgfTsNCg0KICAgIHJldHVybiBhcGk7DQp9KShqUXVlcnksIGRvY3VtZW50KTsNCg0KWEEucmVnaXN0ZXIoInBsYXlsaXN0IiwgWEEuY29tcG9uZW50LnBsYXlsaXN0KTsNCg==
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 11665
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20180226T092937Z
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "f0afbc26-c10f-4d90-a385-bf660a1f1ecd"
