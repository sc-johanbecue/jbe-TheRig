---
ID: "d9424a6d-97f9-4ed0-af5f-d287dbe1c592"
Parent: "4039864c-e58d-4831-a7ab-33ffa08c5687"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Wireframe-deprecated/scripts/component-overlay"
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/D9424A6D97F94ED0AF5FD287DBE1C592.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "d9424a6d-97f9-4ed0-af5f-d287dbe1c592"
  Value: 77u/LyogZ2xvYmFsIFhBQ29udGV4dDpmYWxzZSwgbWVqczpmYWxzZSAqLw0KWEEuY29tcG9uZW50Lm92ZXJsYXkgPSBmdW5jdGlvbigkKSB7DQoNCiAgICB2YXIgYXBpID0ge30sDQogICAgICAgIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZiwNCiAgICAgICAgaG9zdCA9IGxvY2F0aW9uLmhvc3QsDQogICAgICAgIGxhYmVsLA0KICAgICAgICBvdmVybGF5UGxhY2Vob2xkZXIgPSBmYWxzZSwNCiAgICAgICAgbWFyZ2luVG9wID0gMTAwLA0KICAgICAgICBmb2N1c2FibGVFbGVtZW50c1N0cmluZyA9ICdhW2hyZWZdLCBhcmVhW2hyZWZdLCBpbnB1dDpub3QoW2Rpc2FibGVkXSksIHNlbGVjdDpub3QoW2Rpc2FibGVkXSksIHRleHRhcmVhOm5vdChbZGlzYWJsZWRdKSwgYnV0dG9uOm5vdChbZGlzYWJsZWRdKSwgaWZyYW1lLCBvYmplY3QsIGVtYmVkLCBbdGFiaW5kZXg9IjAiXSwgW2NvbnRlbnRlZGl0YWJsZV0nLA0KICAgICAgICBmaXJzdFRhYlN0b3AsDQogICAgICAgIGxhc3RUYWJTdG9wOw0KDQogICAgZnVuY3Rpb24gaXNQcmV2aWV3TW9kZSgpIHsNCiAgICAgICAgaWYgKGhyZWYuaW5kZXhPZigic2NfbW9kZT1wcmV2aWV3IikgPiAtMSkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgdmFyICRoZFBhZ2VNb2RlID0gJCgnI2hkUGFnZU1vZGUnKTsNCg0KICAgICAgICByZXR1cm4gJGhkUGFnZU1vZGUubGVuZ3RoID4gMCAmJiAkaGRQYWdlTW9kZS5hdHRyKCd2YWx1ZScpID09ICdwcmV2aWV3JzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc0VkaXRNb2RlKCkgew0KICAgICAgICBpZiAoaHJlZi5pbmRleE9mKCJzY19tb2RlPWVkaXQiKSA+IC0xKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgdmFyICRoZFBhZ2VNb2RlID0gJCgnI2hkUGFnZU1vZGUnKTsNCg0KICAgICAgICByZXR1cm4gJGhkUGFnZU1vZGUubGVuZ3RoID4gMCAmJiAkaGRQYWdlTW9kZS5hdHRyKCd2YWx1ZScpID09ICdlZGl0JzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc092ZXJsYXlQYWdlKCkgew0KICAgICAgICByZXR1cm4gJCgnI3dyYXBwZXInKS5oYXNDbGFzcygnb3ZlcmxheS1wYWdlJyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaGFzT3ZlcmxheUNvbnRlbnQoKSB7DQogICAgICAgIHJldHVybiAkKCIub3ZlcmxheS1zb3VyY2UiKS5sZW5ndGg7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcmVzaXplT3ZlcmxheShpbm5lciwgY29udGVudCwgb3B0aW9ucykgew0KICAgICAgICB2YXIgdW5pdCA9ICJweCI7DQogICAgICAgIHZhciBjc3MgPSB7DQogICAgICAgICAgICAid2lkdGgiOiAiIiwNCiAgICAgICAgICAgICJoZWlnaHQiOiAiIg0KICAgICAgICB9Ow0KICAgICAgICB2YXIgd2ggPSAkKHdpbmRvdykuaGVpZ2h0KCk7DQoNCiAgICAgICAgaWYgKG9wdGlvbnMucGVyY2VudCkgew0KICAgICAgICAgICAgdW5pdCA9ICIlIjsNCiAgICAgICAgICAgIGlubmVyLmFkZENsYXNzKCJvdmVybGF5LXBlcmNlbnQiKTsNCiAgICAgICAgICAgIGlmIChpc0VkaXRNb2RlKCkpIHsNCiAgICAgICAgICAgICAgICBpbm5lci5hZGRDbGFzcygiZWRpdCIpDQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpbm5lci5yZW1vdmVDbGFzcygib3ZlcmxheS1wZXJjZW50Iik7DQogICAgICAgICAgICBpZiAoaXNFZGl0TW9kZSgpKSB7DQogICAgICAgICAgICAgICAgaW5uZXIucmVtb3ZlQ2xhc3MoImVkaXQiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKG9wdGlvbnMud2lkdGgpIHsNCiAgICAgICAgICAgIGNzc1sid2lkdGgiXSA9IG9wdGlvbnMud2lkdGggKyB1bml0Ow0KICAgICAgICB9DQogICAgICAgIGlmIChvcHRpb25zLmhlaWdodCkgew0KICAgICAgICAgICAgY3NzWyJoZWlnaHQiXSA9IG9wdGlvbnMuaGVpZ2h0ICsgdW5pdDsNCiAgICAgICAgfQ0KDQogICAgICAgIGNzc1sibWF4LWhlaWdodCJdID0gKHdoIC0gbWFyZ2luVG9wIC0gMC4xICogd2gpICsgInB4IjsNCg0KICAgICAgICBjb250ZW50LmNzcyhjc3MpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFVybFZhcmlhYmxlcyh1cmwpIHsNCiAgICAgICAgdmFyIHEgPSB1cmwuc3BsaXQoJz8nKVsxXSwNCiAgICAgICAgICAgIHZhcnMgPSBbXSwNCiAgICAgICAgICAgIGhhc2g7DQoNCiAgICAgICAgaWYgKHEgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICBxID0gcS5zcGxpdCgnJicpOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaGFzaCA9IHFbaV0uc3BsaXQoJz0nKTsNCiAgICAgICAgICAgICAgICB2YXJzLnB1c2goaGFzaFsxXSk7DQogICAgICAgICAgICAgICAgdmFyc1toYXNoWzBdXSA9IGhhc2hbMV07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdmFyczsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRTaXplKHZhcnMpIHsNCiAgICAgICAgdmFyIG9iaiA9IHt9Ow0KDQogICAgICAgIGlmICh2YXJzWyJ3aWR0aCJdICE9PSBudWxsKSB7DQogICAgICAgICAgICBvYmpbIndpZHRoIl0gPSB2YXJzWyJ3aWR0aCJdOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHZhcnNbImhlaWdodCJdICE9PSBudWxsKSB7DQogICAgICAgICAgICBvYmpbImhlaWdodCJdID0gdmFyc1siaGVpZ2h0Il07DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gb2JqOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNoZWNrSW50ZXJuYWwodXJsKSB7DQogICAgICAgIGlmICh1cmwuaW5kZXhPZihob3N0KSA+IC0xKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2hlY2tJbWFnZSh1cmwpIHsNCiAgICAgICAgdmFyIGV4dCA9IHVybC5zcGxpdCgiPyIpWzBdLnNwbGl0KCcuJykucG9wKCk7DQogICAgICAgIGlmICgkLmluQXJyYXkoZXh0LCBbJ2dpZicsICdwbmcnLCAnanBnJywgJ2pwZWcnXSkgPiAtMSkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbG9hZE92ZXJsYXkodXJsLCBvdmVybGF5KSB7DQogICAgICAgIHZhciBjb250ZW50ID0gb3ZlcmxheS5maW5kKCIub3ZlcmxheS1pbm5lciIpLA0KICAgICAgICAgICAgb3ZlcmxheUNvbnRlbnQgPSBvdmVybGF5LmZpbmQoIi5jb21wb25lbnQtY29udGVudCIpLA0KICAgICAgICAgICAgdmFycyA9IGdldFVybFZhcmlhYmxlcyh1cmwpLA0KICAgICAgICAgICAgaW50ZXJuYWxMaW5rID0gY2hlY2tJbnRlcm5hbCh1cmwpLA0KICAgICAgICAgICAgb3ZlcmxheVNpemUgPSBnZXRTaXplKHZhcnMpLA0KICAgICAgICAgICAgc3VmZml4Ow0KICAgICAgICBvdmVybGF5Q29udGVudC5hZGRDbGFzcygnb3ZlcmxheUZ1bGxXaWR0aCcpOw0KICAgICAgICBjb250ZW50LnJlbW92ZUF0dHIoJ3N0eWxlJyk7DQogICAgICAgIGlmIChpbnRlcm5hbExpbmspIHsNCiAgICAgICAgICAgIGlmIChjaGVja0ltYWdlKHVybCkpIHsNCiAgICAgICAgICAgICAgICBjb250ZW50LmVtcHR5KCkuYXBwZW5kKCQoIjxpbWc+IiwgeyBzcmM6IHVybCB9KSk7DQogICAgICAgICAgICAgICAgY29udGVudC5jc3Mob3ZlcmxheVNpemUpOw0KICAgICAgICAgICAgICAgIG92ZXJsYXlDb250ZW50LnJlbW92ZUNsYXNzKCdvdmVybGF5RnVsbFdpZHRoJyk7DQogICAgICAgICAgICAgICAgc2hvd092ZXJsYXkob3ZlcmxheSk7DQoNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodXJsLmluZGV4T2YoIm92ZXJsYXl0eXBlPWlmcmFtZSIpID4gLTEpIHsNCiAgICAgICAgICAgICAgICBjb250ZW50LmVtcHR5KCkuYXBwZW5kKCQoIjxpZnJhbWU+IiwgeyBzcmM6IHVybCwgc3R5bGU6ICJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlIiB9KSk7DQogICAgICAgICAgICAgICAgY29udGVudC5jc3Mob3ZlcmxheVNpemUpOw0KICAgICAgICAgICAgICAgIHNob3dPdmVybGF5KG92ZXJsYXkpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNQcmV2aWV3TW9kZSgpKSB7DQogICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA9ICJjZl9vdmVybGF5PTEiOw0KICAgICAgICAgICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgic2l0ZWNvcmUvc2hlbGwvIik7DQogICAgICAgICAgICAgICAgICAgIHVybCArPSAodXJsLmluZGV4T2YoIj8iKSA9PSAtMSA/ICI/IiA6ICImIikgKyBzdWZmaXg7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgJC5nZXQodXJsLCBmdW5jdGlvbihkYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBvdmVybGF5RGF0YSA9ICQoZGF0YSkuYmVmb3JlKCkuZmlyc3QoKTsNCg0KICAgICAgICAgICAgICAgICAgICByZXNpemVPdmVybGF5KGNvbnRlbnQsIG92ZXJsYXlDb250ZW50LCB7DQogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogb3ZlcmxheURhdGEuYXR0cigiZGF0YS13aWR0aCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBvdmVybGF5RGF0YS5kYXRhKCJoZWlnaHQiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnQ6IG92ZXJsYXlEYXRhLmRhdGEoInBlcmNlbnQiKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBjb250ZW50LmVtcHR5KCkuYXBwZW5kKGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICBYQS5pbml0KCk7DQogICAgICAgICAgICAgICAgICAgIHNob3dPdmVybGF5KG92ZXJsYXkpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKGNoZWNrSW1hZ2UodXJsKSkgew0KICAgICAgICAgICAgICAgIGNvbnRlbnQuZW1wdHkoKS5hcHBlbmQoJCgiPGltZz4iLCB7IHNyYzogdXJsIH0pKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29udGVudC5lbXB0eSgpLmFwcGVuZCgkKCI8aWZyYW1lID4iLCB7IHNyYzogdXJsLCBzdHlsZTogIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCUiIH0pKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnRlbnQuY3NzKG92ZXJsYXlTaXplKTsNCiAgICAgICAgICAgIHNob3dPdmVybGF5KG92ZXJsYXkpOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBwcmVTaG93T3ZlcmxheShvdmVybGF5KSB7DQogICAgICAgIG92ZXJsYXkuY3NzKHsNCiAgICAgICAgICAgICJvcGFjaXR5IjogMQ0KICAgICAgICB9KS5zaG93KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2hvd092ZXJsYXkob3ZlcmxheSkgew0KICAgICAgICB2YXIgY2xvc2UsIGNvbnRlbnQ7DQogICAgICAgIG92ZXJsYXkuc2hvdygpLmFuaW1hdGUoew0KICAgICAgICAgICAgb3BhY2l0eTogMQ0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBoaWRlIHdyYXBwZXIgZGF0YSBmcm9tIHNjcmVlbiByZWFkZXJzDQogICAgICAgICQoIiN3cmFwcGVyIikuYWRkQ2xhc3MoImFyaWEtaGlkZGVuIik7DQoNCiAgICAgICAgY2xvc2UgPSBvdmVybGF5LmZpbmQoIi5vdmVybGF5LWNsb3NlIik7DQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNsb3NlLmZvY3VzKCk7IH0sIDApOw0KDQogICAgICAgIGNvbnRlbnQgPSBvdmVybGF5LmZpbmQoIi5vdmVybGF5LWlubmVyIik7DQogICAgICAgIGNvbnRlbnQuYmx1cihmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgICBhcmdzLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBhcmdzLnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2xvc2UuZm9jdXMoKSB9LCAwKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gRmluZCBhbGwgZm9jdXNhYmxlIGNoaWxkcmVuDQogICAgICAgIHZhciBmb2N1c2FibGVFbGVtZW50cyA9IGNvbnRlbnQuZmluZChmb2N1c2FibGVFbGVtZW50c1N0cmluZyk7DQoNCiAgICAgICAgLy8gQ29udmVydCBOb2RlTGlzdCB0byBBcnJheQ0KICAgICAgICBmb2N1c2FibGVFbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZvY3VzYWJsZUVsZW1lbnRzKTsgICAgICAgIA0KICAgICAgICBmaXJzdFRhYlN0b3AgPSBmb2N1c2FibGVFbGVtZW50c1swXTsNCiAgICAgICAgbGFzdFRhYlN0b3AgPSBmb2N1c2FibGVFbGVtZW50c1tmb2N1c2FibGVFbGVtZW50cy5sZW5ndGggLSAxXTsNCg0KICAgICAgICAvLyBGb2N1cyBmaXJzdA0KICAgICAgICBmaXJzdFRhYlN0b3AuZm9jdXMoKTsNCg0KICAgICAgICBYQUNvbnRleHQuVHJhY2tpbmcudHJhY2soDQogICAgICAgICAgICBYQUNvbnRleHQuRG9tYWluLlRyYWNraW5nVHlwZXMoKS5ldmVudCwgew0KICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAiT3ZlcmxheSIsDQogICAgICAgICAgICAgICAgZXZlbnQ6ICJvcGVuIiwNCiAgICAgICAgICAgICAgICBsYWJlbDogbGFiZWwsDQogICAgICAgICAgICAgICAgZGF0YTogMA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICJzeW5jIg0KICAgICAgICApOw0KICAgICAgICByZXR1cm4gb3ZlcmxheTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBoaWRlT3ZlcmxheShvdmVybGF5KSB7DQogICAgICAgICQoIiN3cmFwcGVyIikucmVtb3ZlQ2xhc3MoImFyaWEtaGlkZGVuIik7DQogICAgICAgIHZhciBjb250ZW50ID0gb3ZlcmxheS5maW5kKCIub3ZlcmxheS1pbm5lciIpOw0KDQogICAgICAgIG92ZXJsYXkuYW5pbWF0ZSh7IG9wYWNpdHk6IDAgfSwNCiAgICAgICAgICAgIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIG92ZXJsYXkuaGlkZSgpOw0KICAgICAgICAgICAgICAgIGNvbnRlbnQuZW1wdHkoKTsNCg0KICAgICAgICAgICAgICAgIGlmIChtZWpzKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgaW4gbWVqcy5wbGF5ZXJzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgiIyIgKyBtZWpzLnBsYXllcnNbcF0uaWQpLnBhcmVudHMoIi5vdmVybGF5IikubGVuZ3RoID09IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIjIiArIG1lanMucGxheWVyc1twXS5pZCArICcgdmlkZW8nKS5hdHRyKCdzcmMnLCAnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVqcy5wbGF5ZXJzW3BdLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lanMucGxheWVycy5zcGxpY2UocCwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICk7DQoNCiAgICAgICAgWEFDb250ZXh0LlRyYWNraW5nLnRyYWNrKA0KICAgICAgICAgICAgWEFDb250ZXh0LkRvbWFpbi5UcmFja2luZ1R5cGVzKCkuZXZlbnQsIHsNCiAgICAgICAgICAgICAgICBjYXRlZ29yeTogIk92ZXJsYXkiLA0KICAgICAgICAgICAgICAgIGV2ZW50OiAiY2xvc2UiLA0KICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJlbCwNCiAgICAgICAgICAgICAgICBkYXRhOiAwDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgInN5bmMiDQogICAgICAgICk7DQogICAgICAgIHJldHVybiBvdmVybGF5Ow0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXkoKSB7DQogICAgICAgIHZhciBvdmVybGF5ID0gIjxkaXYgY2xhc3M9J292ZXJsYXktd3JhcHBlcic+IiArDQogICAgICAgICAgICAiPGRpdiBjbGFzcz0nb3ZlcmxheSBjb21wb25lbnQnPiIgKw0KICAgICAgICAgICAgIjxkaXYgY2xhc3M9J2NvbXBvbmVudC1jb250ZW50JyByb2xlPSdkaWFsb2cnPiIgKw0KICAgICAgICAgICAgIjxkaXYgY2xhc3M9J292ZXJsYXktaW5uZXInPjwvZGl2PiIgKw0KICAgICAgICAgICAgIjxkaXYgY2xhc3M9J292ZXJsYXktY2xvc2UnIHJvbGU9J2J1dHRvbicgYXJpYS1sYWJlbD0nQ2xvc2UgZGlhbG9nJz48L2Rpdj4iICsNCiAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICI8L2Rpdj4iOw0KDQogICAgICAgICQoImJvZHkiKS5hcHBlbmQob3ZlcmxheSk7DQogICAgfQ0KDQogICAgYXBpLmluaXQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIG92ZXJsYXlDb250ZW50LA0KICAgICAgICAgICAgb3ZlcmxheVNvdXJjZSwNCiAgICAgICAgICAgIG92ZXJsYXlJbm5lciwNCiAgICAgICAgICAgIG92ZXJsYXlDbG9zZUxpbmssDQogICAgICAgICAgICBjbG9zZUFjdGlvbiwNCiAgICAgICAgICAgIG92ZXJsYXlDbGlja1NvdXJjZSwNCiAgICAgICAgICAgIHBhZ2UsDQogICAgICAgICAgICBvdmVybGF5LA0KICAgICAgICAgICAgY29udGVudDsNCg0KICAgICAgICBpZiAoIW92ZXJsYXlQbGFjZWhvbGRlciAmJiBoYXNPdmVybGF5Q29udGVudCgpKSB7DQogICAgICAgICAgICBjcmVhdGVPdmVybGF5KCk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoaXNPdmVybGF5UGFnZSgpKSB7DQoNCiAgICAgICAgICAgIHBhZ2UgPSAkKCIub3ZlcmxheS1wYWdlIik7DQogICAgICAgICAgICBvdmVybGF5Q29udGVudCA9IHBhZ2UuY2hpbGRyZW4oIi5jb21wb25lbnQtY29udGVudCIpOw0KICAgICAgICAgICAgb3ZlcmxheSA9ICQoIiNzcG5PdmVybGF5Iik7DQogICAgICAgICAgICBjb250ZW50ID0gb3ZlcmxheUNvbnRlbnQuY2hpbGRyZW4oIi5vdmVybGF5LWlubmVyIik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGFwaS5yZXNpemVPdmVybGF5KGNvbnRlbnQsIG92ZXJsYXlDb250ZW50LCB7DQogICAgICAgICAgICAgICAgd2lkdGg6IG92ZXJsYXlDb250ZW50LmRhdGEoIndpZHRoIiksDQogICAgICAgICAgICAgICAgaGVpZ2h0OiBvdmVybGF5Q29udGVudC5kYXRhKCJoZWlnaHQiKSwNCiAgICAgICAgICAgICAgICBwZXJjZW50OiBvdmVybGF5Q29udGVudC5kYXRhKCJwZXJjZW50IikNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgb3ZlcmxheUNvbnRlbnQub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcGFnZS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNQcmV2aWV3TW9kZSgpKSB7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoInNjX21vZGU9cHJldmlldyIsICJzY19tb2RlPWVkaXQiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBvdmVybGF5ID0gJCgiLm92ZXJsYXktd3JhcHBlciA+IC5vdmVybGF5Iik7DQogICAgICAgIG92ZXJsYXlDb250ZW50ID0gb3ZlcmxheS5maW5kKCIuY29tcG9uZW50LWNvbnRlbnQiKTsNCiAgICAgICAgb3ZlcmxheVNvdXJjZSA9ICQoIi5vdmVybGF5LXNvdXJjZSBhOm5vdCguaW5pdGlhbGl6ZWQpLCBhLm92ZXJsYXktc291cmNlOm5vdCguaW5pdGlhbGl6ZWQpIik7DQogICAgICAgIG92ZXJsYXlJbm5lciA9ICQoIi5vdmVybGF5LWlubmVyIik7DQogICAgICAgIG92ZXJsYXlDbG9zZUxpbmsgPSBvdmVybGF5LmZpbmQoIi5vdmVybGF5LWNsb3NlIik7DQogICAgICAgIGNsb3NlQWN0aW9uOw0KICAgICAgICBvdmVybGF5Q2xpY2tTb3VyY2U7DQoNCiAgICAgICAgY2xvc2VBY3Rpb24gPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIGhpZGVPdmVybGF5KG92ZXJsYXkpOw0KICAgICAgICAgICAgb3ZlcmxheUlubmVyLm9mZigiYmx1ciIpOw0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheUNsaWNrU291cmNlICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheUNsaWNrU291cmNlLmZvY3VzKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgMCk7DQogICAgICAgIH07DQoNCiAgICAgICAgaWYgKCFvdmVybGF5UGxhY2Vob2xkZXIpIHsNCiAgICAgICAgICAgIG92ZXJsYXlDb250ZW50Lm9uKCJjbGljayIsIGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgb3ZlcmxheS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICBjbG9zZUFjdGlvbigpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIG92ZXJsYXlDbG9zZUxpbmsub24oImNsaWNrIiwgZnVuY3Rpb24gKGFyZ3MpIHsNCiAgICAgICAgICAgICAgICBhcmdzLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgICAgIGNsb3NlQWN0aW9uKCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgJCgiYm9keSIpLmtleWRvd24oZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgVEFCIGtleSBwcmVzcw0KICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDkpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gU0hJRlQgKyBUQUINCiAgICAgICAgICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBmaXJzdFRhYlN0b3ApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFRhYlN0b3AuZm9jdXMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVEFCDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gbGFzdFRhYlN0b3ApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RUYWJTdG9wLmZvY3VzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBFU0NBUEUNCiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgew0KICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgICAgIGNsb3NlQWN0aW9uKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICQod2luZG93KS5vbigicmVzaXplIiwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTsNCiAgICAgICAgICAgICAgICBoZWlnaHQgPSBoZWlnaHQgLSBtYXJnaW5Ub3AgLSAwLjEgKiBoZWlnaHQ7DQogICAgICAgICAgICAgICAgb3ZlcmxheUNvbnRlbnQuY3NzKCJtYXgtaGVpZ2h0IiwgaGVpZ2h0ICsgInB4Iik7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgb3ZlcmxheVBsYWNlaG9sZGVyID0gdHJ1ZTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgb3ZlcmxheVNvdXJjZS5lYWNoKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgaWYgKGlzRWRpdE1vZGUoKSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJCh0aGlzKS5vbigiY2xpY2siLCBmdW5jdGlvbihldmVudCkgew0KICAgICAgICAgICAgICAgIG92ZXJsYXlDbGlja1NvdXJjZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7DQogICAgICAgICAgICAgICAgaWYgKCFpc0VkaXRNb2RlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICAgICAgICAgIHByZVNob3dPdmVybGF5KG92ZXJsYXksIG92ZXJsYXlDb250ZW50KTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgdXJpID0gdGhpcy5ocmVmOw0KICAgICAgICAgICAgICAgICAgICBsb2FkT3ZlcmxheSh1cmksIG92ZXJsYXkpOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gdGhpcy5ocmVmLnNwbGl0KCcvJyk7DQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGhyZWYubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsID0gaHJlZi5wb3AoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbC5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gJCh0aGlzKS5vbignZm9jdXMnLCBmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgICAvLyAgICAgLy9hcmdzLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAvLyAgICAgaWYgKGFyZ3MuY3VycmVudFRhcmdldCA9PT0gb3ZlcmxheUNsaWNrU291cmNlKSB7DQogICAgICAgICAgICAvLyAgICAgICAgIG92ZXJsYXlDbGlja1NvdXJjZSA9IG51bGw7DQogICAgICAgICAgICAvLyAgICAgfQ0KICAgICAgICAgICAgLy8gfSk7DQoNCiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoImluaXRpYWxpemVkIik7DQogICAgICAgIH0pOw0KDQoNCiAgICB9Ow0KDQogICAgcmV0dXJuIGFwaTsNCg0KfShqUXVlcnkpOw0KDQpYQS5yZWdpc3Rlcigib3ZlcmxheSIsIFhBLmNvbXBvbmVudC5vdmVybGF5KTs=
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 12947
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160727T141859Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "908ca971-9f94-456b-99e6-5631d0654148"
