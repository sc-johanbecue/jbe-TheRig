---
ID: "f5b671c4-4922-4c88-b33f-aa00ed86c05c"
Parent: "4039864c-e58d-4831-a7ab-33ffa08c5687"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Wireframe-deprecated/scripts/component-accordions"
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/F5B671C449224C88B33FAA00ED86C05C.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "f5b671c4-4922-4c88-b33f-aa00ed86c05c"
  Value: LyogZ2xvYmFsIF86dHJ1ZSAqLw0KWEEuY29tcG9uZW50LmFjY29yZGlvbnMgPSAoZnVuY3Rpb24gKCQpIHsNCiAgICB2YXIgcHViID0ge307DQoNCiAgICBmdW5jdGlvbiBwYWdlRWRpdG9yKCkgew0KICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICBTaXRlY29yZS5QYWdlTW9kZXMuQ2hyb21lTWFuYWdlci5yZXNldENocm9tZXMoKTsgLy9wYWdlIGVkaXRvciBsaW5lcyBmaXgNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHZhciB0b29nbGVFdmVudHMgPSB7DQogICAgICAgIGZvY3VzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCJzaG93Iik7DQogICAgICAgIH0sDQogICAgICAgIGJsdXI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoInNob3ciKTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBoZWFkZXJCYWNrZ3JvdW5kKGhlYWRlcikgew0KICAgICAgICB2YXIgYmFja2dyb3VuZEljb24gPSAkKGhlYWRlciksDQogICAgICAgICAgICBiYWNrZ3JvdW5kID0gJChoZWFkZXIpLmZpbmQoJ2ltZycpLA0KICAgICAgICAgICAgYmFja2dyb3VuZFNyYyA9IGJhY2tncm91bmQuYXR0cignc3JjJyk7DQoNCiAgICAgICAgaWYgKGJhY2tncm91bmRTcmMpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmRJY29uLnBhcmVudHMoJy5hY2NvcmRpb24nKS5hZGRDbGFzcygnYWNjb3JkaW9uLWltYWdlJyk7DQoNCiAgICAgICAgICAgIGJhY2tncm91bmRJY29uLmNzcyh7DQogICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnOiAndXJsKCcgKyBiYWNrZ3JvdW5kU3JjICsgJyknLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXJlcGVhdCc6ICduby1yZXBlYXQnLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnOiAnY292ZXInLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXBvc2l0aW9uJzogJzUwJSAxMDAlJw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGJhY2tncm91bmQuaGlkZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2FsY1NsaWRlU2l6ZShhY2MpIHsNCiAgICAgICAgdmFyIGFjY29yZGlvbldpZHRoID0gJChhY2MpLndpZHRoKCksDQogICAgICAgICAgICBhY2NvcmRpb25JdGVtcyA9ICQoYWNjKS5maW5kKCcuaXRlbScpLA0KICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMDsNCg0KICAgICAgICBfLmVhY2goYWNjb3JkaW9uSXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7DQogICAgICAgICAgICB2YXIgaXRlbUNvbnRlbnQgPSAkKGl0ZW0pLmZpbmQoJy50b2dnbGUtY29udGVudCcpLA0KICAgICAgICAgICAgICAgIGl0ZW1IZWFkZXIgPSAkKGl0ZW0pLmZpbmQoJy50b2dnbGUtaGVhZGVyJyksDQogICAgICAgICAgICAgICAgc2xpZGVXaWR0aCA9IGFjY29yZGlvbldpZHRoIC0gKGFjY29yZGlvbkl0ZW1zLmxlbmd0aCAqIGl0ZW1IZWFkZXIub3V0ZXJXaWR0aCgpKTsNCg0KICAgICAgICAgICAgaWYgKCQoaXRlbSkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7DQogICAgICAgICAgICAgICAgJChpdGVtKS5jc3Moew0KICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiBzbGlkZVdpZHRoDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vd2lkdGgNCiAgICAgICAgICAgIGl0ZW1Db250ZW50LmNzcyh7DQogICAgICAgICAgICAgICAgJ3dpZHRoJzogKCQoYWNjKS5oYXNDbGFzcygnYWNjb3JkaW9uLWltYWdlJykpID8gc2xpZGVXaWR0aCArIGl0ZW1IZWFkZXIub3V0ZXJXaWR0aCgpIDogc2xpZGVXaWR0aCAtIGl0ZW1IZWFkZXIub3V0ZXJXaWR0aCgpIC0gcGFyc2VJbnQoaXRlbUhlYWRlci5jc3MoJ3BhZGRpbmcnKSkNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvL2hlaWdodA0KICAgICAgICAgICAgaWYgKCQoaXRlbSkuZmluZCgnLnRvZ2dsZS1jb250ZW50JykuaGVpZ2h0KCkgPiBtYXhIZWlnaHQpIHsNCiAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAkKGl0ZW0pLmZpbmQoJy50b2dnbGUtY29udGVudCcpLmhlaWdodCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhbmltYXRlSG9yaXpvbnRhbChwcm9wZXJ0aWVzKSB7DQogICAgICAgIHZhciBhY2NvcmRpb24gPSAkKHRoaXMpLnBhcmVudHMoJy5hY2NvcmRpb24nKSwNCiAgICAgICAgICAgIHBhbmVsID0gJCh0aGlzKS5jbG9zZXN0KCcuaXRlbScpLA0KICAgICAgICAgICAgaGVhZGVyID0gcGFuZWwuZmluZCgnLnRvZ2dsZS1oZWFkZXInKSwNCiAgICAgICAgICAgIGNvbnRlbnQgPSBwYW5lbC5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKSwNCiAgICAgICAgICAgIGl0ZW1zID0gYWNjb3JkaW9uLmZpbmQoJy5pdGVtJyksDQogICAgICAgICAgICBzaWJsaW5ncyA9IHBhbmVsLnNpYmxpbmdzKCksDQogICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQgPSBzaWJsaW5ncy5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKTsNCg0KICAgICAgICBzaWJsaW5ncy5zdG9wKHRydWUpLmFuaW1hdGUoew0KICAgICAgICAgICAgIndpZHRoIjogMA0KICAgICAgICB9LCBwcm9wZXJ0aWVzLnNwZWVkLCBwcm9wZXJ0aWVzLmVhc2luZywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgc2libGluZ3NDb250ZW50LmNzcyh7DQogICAgICAgICAgICAgICAgImRpc3BsYXkiOiAibm9uZSINCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCg0KICAgICAgICBpZiAocGFuZWwuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7DQoNCiAgICAgICAgICAgIHZhciBzbGlkZVdpZHRoID0gYWNjb3JkaW9uLmhhc0NsYXNzKCdhY2NvcmRpb24taW1hZ2UnKSA/IGNvbnRlbnQub3V0ZXJXaWR0aCgpIDogKGFjY29yZGlvbi5vdXRlcldpZHRoKCkgLSAoKGl0ZW1zLmxlbmd0aCAtIDEpICogcGFuZWwub3V0ZXJXaWR0aCgpICsgMikpLA0KICAgICAgICAgICAgICAgIGNvbnRlbnRXaWR0aCA9IGFjY29yZGlvbi5oYXNDbGFzcygnYWNjb3JkaW9uLWltYWdlJykgPyBzbGlkZVdpZHRoIDogc2xpZGVXaWR0aCAtIGhlYWRlci5vdXRlcldpZHRoKCk7DQoNCiAgICAgICAgICAgIHBhbmVsLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7DQogICAgICAgICAgICAgICAgIndpZHRoIjogc2xpZGVXaWR0aA0KICAgICAgICAgICAgfSwgcHJvcGVydGllcy5zcGVlZCwgcHJvcGVydGllcy5lYXNpbmcsIGZ1bmN0aW9uICgpIHsNCg0KICAgICAgICAgICAgfSk7DQoNCg0KICAgICAgICAgICAgY29udGVudC5jc3Moew0KICAgICAgICAgICAgICAgICJ3aWR0aCI6IGNvbnRlbnRXaWR0aCwNCiAgICAgICAgICAgICAgICAiZGlzcGxheSI6ICJibG9jayINCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgIHBhbmVsLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7DQogICAgICAgICAgICAgICAgIndpZHRoIjogMA0KICAgICAgICAgICAgfSwgcHJvcGVydGllcy5zcGVlZCwgcHJvcGVydGllcy5lYXNpbmcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBjb250ZW50LmNzcyh7DQogICAgICAgICAgICAgICAgICAgICJkaXNwbGF5IjogIm5vbmUiDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1LZXkoYWNjb3JkaW9ucykgew0KICAgICAgICB2YXIgZmlyc3RBY2NvcmRpb25JZCA9IGFjY29yZGlvbnNbMF0uaWQ7DQogICAgICAgIGlmIChhY2NvcmRpb25zLmxlbmd0aCA+IDAgJiYgZmlyc3RBY2NvcmRpb25JZCAhPSAiIikgew0KICAgICAgICAgICAgcmV0dXJuIGZpcnN0QWNjb3JkaW9uSWQudG9Mb2NhbGVMb3dlckNhc2UoKQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNsZWFuQXJyYXkoYWN0dWFsKSB7DQogICAgICAgIHZhciBuZXdBcnJheSA9IG5ldyBBcnJheSgpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjdHVhbC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYgKGFjdHVhbFtpXSkgew0KICAgICAgICAgICAgICAgIG5ld0FycmF5LnB1c2goYWN0dWFsW2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmV3QXJyYXk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWNjb3JkaW9uKGFjYywgcHJvcGVydGllcykgew0KICAgICAgICB2YXIgZXYgPSAnY2xpY2snLA0KICAgICAgICAgICAgJGJvZHkgPSAkKCdib2R5JyksDQogICAgICAgICAgICB0b2dnbGVIZWFkZXIgPSBhY2MuZmluZCgnLnRvZ2dsZS1oZWFkZXInKTsNCg0KICAgICAgICBpZiAocHJvcGVydGllcy5leHBhbmRPbkhvdmVyKSB7DQogICAgICAgICAgICBpZiAoISRib2R5Lmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICAgICAgZXYgPSAnbW91c2VlbnRlcic7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGV2ID0gJ2NsaWNrJzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQoNCiAgICAgICAgdG9nZ2xlSGVhZGVyLm9uKCJtb3VzZW92ZXIiLCB0b29nbGVFdmVudHMuZm9jdXMpOw0KICAgICAgICB0b2dnbGVIZWFkZXIub24oIm1vdXNlbGVhdmUiLCB0b29nbGVFdmVudHMuYmx1cik7DQogICAgICAgIHRvZ2dsZUhlYWRlci5vbigiZm9jdXMiLCB0b29nbGVFdmVudHMuZm9jdXMpOw0KICAgICAgICB0b2dnbGVIZWFkZXIub24oImJsdXIiLCB0b29nbGVFdmVudHMuYmx1cik7DQogICAgICAgIHRvZ2dsZUhlYWRlci5vbigia2V5dXAiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykgew0KICAgICAgICAgICAgICAgICQodGhpcykuY2xpY2soKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCg0KICAgICAgICBpZiAoYWNjLmhhc0NsYXNzKCdhY2NvcmRpb24taG9yaXpvbnRhbCcpKSB7DQogICAgICAgICAgICAvL2NhbGMgc2xpZGUgd2lkdGgNCiAgICAgICAgICAgICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBjYWxjU2xpZGVTaXplKGFjYyk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgXy5lYWNoKHRvZ2dsZUhlYWRlciwgZnVuY3Rpb24gKGhlYWRlcikgew0KICAgICAgICAgICAgICAgIGhlYWRlckJhY2tncm91bmQoaGVhZGVyKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICB0b2dnbGVIZWFkZXIgPSB0b2dnbGVIZWFkZXIuZmluZCgnLmNvbXBvbmVudC1jb250ZW50Jyk7DQogICAgICAgIH0NCiAgICAgICAgdG9nZ2xlSGVhZGVyLm9uKGV2LCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgYWNjb3JkaW9uID0gJCh0aGlzKS5wYXJlbnRzKCcuYWNjb3JkaW9uJyksDQogICAgICAgICAgICAgICAgcGFuZWwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5pdGVtJyksDQogICAgICAgICAgICAgICAgJGJvZHkgPSAkKCdib2R5JyksDQogICAgICAgICAgICAgICAgY29udGVudCA9IHBhbmVsLmZpbmQoJy50b2dnbGUtY29udGVudCcpLA0KICAgICAgICAgICAgICAgIHNpYmxpbmdzID0gcGFuZWwuc2libGluZ3MoKSwNCiAgICAgICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQgPSBzaWJsaW5ncy5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKSwNCiAgICAgICAgICAgICAgICB0aW1lb3V0SWQ7DQoNCiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBwYWdlRWRpdG9yKCk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBpZiAoIXByb3BlcnRpZXMuZXhwYW5kT25Ib3Zlcikgew0KICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmNhbk9wZW5NdWx0aXBsZSkgew0KICAgICAgICAgICAgICAgICAgICBwYW5lbC50b2dnbGVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChhY2NvcmRpb24uaGFzQ2xhc3MoImFjY29yZGlvbi1ob3Jpem9udGFsIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGVIb3Jpem9udGFsLmNhbGwodGhpcywgcHJvcGVydGllcyk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc3RvcCgpLnNsaWRlVG9nZ2xlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5jYW5Ub2dnbGUpIHsNCg0KDQogICAgICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY29yZGlvbi5oYXNDbGFzcygiYWNjb3JkaW9uLWhvcml6b250YWwiKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYW5pbWF0aW9uIGZvciBob3Jpem9udGFsIGFjY29yZGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGVIb3Jpem9udGFsLmNhbGwodGhpcywgcHJvcGVydGllcyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2libGluZ3NDb250ZW50LnN0b3AoKS5zbGlkZVVwKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0b3AoKS5zbGlkZVRvZ2dsZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzQ29udGVudC5zbGlkZVVwKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zbGlkZURvd24oew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmNhblRvZ2dsZSkgew0KICAgICAgICAgICAgICAgICAgICBwYW5lbC51bmJpbmQoJ21vdXNlbGVhdmUnKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoISRib2R5Lmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3JkaW9uLmhhc0NsYXNzKCJhY2NvcmRpb24taG9yaXpvbnRhbCIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbiBmb3IgaG9yaXpvbnRhbCBhY2NvcmRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGVIb3Jpem9udGFsLmNhbGwodGhpcywgcHJvcGVydGllcyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc3RvcCgpLnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICRib2R5Lm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3JkaW9uLmhhc0NsYXNzKCJhY2NvcmRpb24taG9yaXpvbnRhbCIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbiBmb3IgaG9yaXpvbnRhbCBhY2NvcmRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGVIb3Jpem9udGFsLmNhbGwodGhpcywgcHJvcGVydGllcyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc3RvcCgpLnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQoNCg0KICAgICAgICAgICAgICAgICAgICBjb250ZW50LnVuYmluZCgnbW91c2VlbnRlcicpOw0KICAgICAgICAgICAgICAgICAgICBjb250ZW50Lm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoYWNjb3JkaW9uLmhhc0NsYXNzKCJhY2NvcmRpb24taG9yaXpvbnRhbCIpKSB7DQogICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCg0KICAgICAgICAgICAgICAgICAgICBwYW5lbC50b2dnbGVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgIC8vYW5pbWF0aW9uIGZvciBob3Jpem9udGFsIGFjY29yZGlvbg0KICAgICAgICAgICAgICAgICAgICBhbmltYXRlSG9yaXpvbnRhbC5jYWxsKHRoaXMsIHByb3BlcnRpZXMpOw0KDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc2libGluZ3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQuc3RvcCgpLnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQoNCiAgICAgICAgICAgICAgICAgICAgcGFuZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICBjb250ZW50LnNsaWRlRG93bih7DQogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGRpc2FibGVFbXB0eUFjY29yZGlvbnMoJGFjY29yZGlvbikgew0KICAgICAgICB2YXIgZW1wdHlQbGFjZWhvbGRlcnMgPSAkYWNjb3JkaW9uLmZpbmQoIi5pdGVtIC5zY0VtcHR5UGxhY2Vob2xkZXIiKSwNCiAgICAgICAgICAgIGksIGxlbmd0aCwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyQ29kZVRhZywNCiAgICAgICAgICAgIHBhcmVudCwNCiAgICAgICAgICAgICRwbGFjZWhvbGRlciwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVySWQsDQogICAgICAgICAgICBwbGFjZWhvbGRlcktleSwNCiAgICAgICAgICAgIGVkaXRGcmFtZSwNCiAgICAgICAgICAgIGNocm9tZUtleSwNCiAgICAgICAgICAgIGg7DQoNCiAgICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gZW1wdHlQbGFjZWhvbGRlcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICRwbGFjZWhvbGRlciA9ICQoZW1wdHlQbGFjZWhvbGRlcnNbaV0pOw0KICAgICAgICAgICAgcGxhY2Vob2xkZXJJZCA9ICRwbGFjZWhvbGRlci5hdHRyKCJzYy1wbGFjZWhvbGRlci1pZCIpOw0KDQogICAgICAgICAgICAvL2Rpc2FibGUgZWRpdCBmcmFtZXMNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyQ29kZVRhZyA9ICRwbGFjZWhvbGRlci5zaWJsaW5ncygiY29kZVtjaHJvbWV0eXBlPSdwbGFjZWhvbGRlciddW2lkPSciICsgcGxhY2Vob2xkZXJJZCArICInXSIpOw0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcktleSA9IHBsYWNlaG9sZGVyQ29kZVRhZy5hdHRyKCJrZXkiKTsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChwbGFjZWhvbGRlcktleSkgPT09ICJzdHJpbmciKSB7DQogICAgICAgICAgICAgICAgICAgIGVkaXRGcmFtZSA9IFNpdGVjb3JlLlBhZ2VNb2Rlcy5DaHJvbWVNYW5hZ2VyLmNocm9tZXMoKS5maWx0ZXIoZnVuY3Rpb24gKGNocm9tZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lS2V5ID0gY2hyb21lLm9wZW5pbmdNYXJrZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2hyb21lS2V5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWVLZXkgPSBjaHJvbWVLZXkuYXR0cigia2V5Iik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIChjaHJvbWVLZXkpICE9PSAidW5kZWZpbmVkIiAmJiBjaHJvbWVLZXkuaW5kZXhPZihwbGFjZWhvbGRlcktleSkgPT09IDA7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGVkaXRGcmFtZVswXS50eXBlLmNocm9tZS5kYXRhLmN1c3RvbS5lZGl0YWJsZSA9ICJmYWxzZSI7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgNjY2Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgLy9mYWxsYmFjayAtIGRlbGV0ZSBjb2RlIHRhZ3MgdG8gcHJldmVudCBpbnNlcnRpbmcgaW50byBwbGFjZWhvbGRlcnMNCiAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIuc2libGluZ3MoImNvZGVbY2hyb21ldHlwZT0ncGxhY2Vob2xkZXInXSIpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWFsZXJ0LCBuby1jb25zb2xlICovDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkNvdWxkIG5vdCBkaXNhYmxlIGVkaXRpbmcgZm9yIHBsYWNlaG9sZGVyIiwgZSk7DQogICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1hbGVydCwgbm8tY29uc29sZSAqLw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvL2FkanVzdCBoZWlnaHQsIGFuZCByZW1vdmUgcGxhY2Vob2xkZXIgImRhc2hlZCIgYmFja2dyb3VuZA0KICAgICAgICAgICAgcGFyZW50ID0gJHBsYWNlaG9sZGVyLnBhcmVudHMoIi50b2dnbGUtaGVhZGVyIik7DQogICAgICAgICAgICBpZiAocGFyZW50Lmxlbmd0aCAhPT0gMCkgew0KICAgICAgICAgICAgICAgIGggPSBwYXJzZUludChwYXJlbnQuY3NzKCJmb250LXNpemUiKSkgKiAyIHx8ICgkcGxhY2Vob2xkZXIuaGVpZ2h0KCkgLyAzKTsNCiAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIuYXBwZW5kKCQoIjxwPltObyBjb21wb25lbnRzIGluIGhlYWRlcl08L3A+IikpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBoID0gJHBsYWNlaG9sZGVyLmhlaWdodCgpOw0KICAgICAgICAgICAgICAgICRwbGFjZWhvbGRlci5hcHBlbmQoJCgiPHA+W05vIGNvbXBvbmVudHMgaW4gc2VjdGlvbl08L3A+IikpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaCArPSAicHgiOw0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyLnJlbW92ZUNsYXNzKCJzY0VtcHR5UGxhY2Vob2xkZXIiKTsNCiAgICAgICAgICAgICRwbGFjZWhvbGRlci5jc3MoImhlaWdodCIsIGgpOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBwdWIuaW5pdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIGFjY29yZGlvbnMgPSAkKCcuYWNjb3JkaW9uOm5vdCguaW5pdGlhbGl6ZWQpJyk7DQoNCiAgICAgICAgYWNjb3JkaW9ucy5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gJCh0aGlzKS5kYXRhKCdwcm9wZXJ0aWVzJyksDQogICAgICAgICAgICAgICAgYWNjID0gJCh0aGlzKTsNCg0KICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3RvZ2dsZScpKSB7DQogICAgICAgICAgICAgICAgJC5leHRlbmQocHJvcGVydGllcywgew0KICAgICAgICAgICAgICAgICAgICAnY2FuVG9nZ2xlJzogdHJ1ZSwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgYWNjLmZpbmQoJy50b2dnbGUtY29udGVudCcpLmhpZGUoKTsNCg0KICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBYQS5xdWVyeVN0cmluZy5nZXRRdWVyeVBhcmFtKGdldFF1ZXJ5UGFyYW1LZXkoYWNjKSk7DQogICAgICAgICAgICBpZiAoY3VycmVudCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdmFyIGFyciA9IGN1cnJlbnQuc3BsaXQoJywnKTsNCiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBhY2MuZmluZCgnbGknKQ0KICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBpdGVtcy5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBpdGVtc1tpbmRleF07DQogICAgICAgICAgICAgICAgICAgIGlmIChhcnIuaW5kZXhPZihpbmRleCArICIiKSA+IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmFkZENsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuZmluZCgnLnRvZ2dsZS1jb250ZW50Jykuc2hvdygpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0aWVzLmV4cGFuZGVkQnlEZWZhdWx0KSB7DQogICAgICAgICAgICAgICAgYWNjLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgIGFjYy5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmZpbmQoJy50b2dnbGUtY29udGVudCcpLnNob3coKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgYWNjb3JkaW9uKGFjYywgcHJvcGVydGllcyk7DQogICAgICAgICAgICBkaXNhYmxlRW1wdHlBY2NvcmRpb25zKGFjYyk7DQogICAgICAgICAgICBhY2MuYWRkQ2xhc3MoJ2luaXRpYWxpemVkJyk7DQogICAgICAgIH0pOw0KICAgIH07DQoNCiAgICByZXR1cm4gcHViOw0KDQp9KGpRdWVyeSkpOw0KDQpYQS5yZWdpc3RlcignYWNjb3JkaW9ucycsIFhBLmNvbXBvbmVudC5hY2NvcmRpb25zKTs=
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 15119
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160727T141857Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "9bb3f75c-b979-45f3-80d0-801b054b1a45"
